"use strict";(self.webpackChunktramita=self.webpackChunktramita||[]).push([["src_views_RequestForm_vue"],{9210(t,e,r){r.d(e,{F:()=>i});var a=r(6802);const o=(0,r(3814).Jv)("/apps/tramita/api/v1"),i=a.Ay.create({baseURL:o});i.interceptors.response.use(t=>t,t=>(402===t.response?.status&&window.dispatchEvent(new CustomEvent("tramita:license-required")),Promise.reject(t)))},4617(t,e,r){r.d(e,{D:()=>s});var a=r(810),o=r(9210);const i={getByProcessType:async t=>(await o.F.get(`/process-types/${t}/form-templates`)).data,getById:async t=>(await o.F.get(`/form-templates/${t}`)).data,create:async(t,e)=>(await o.F.post(`/process-types/${t}/form-templates`,e)).data,update:async(t,e)=>(await o.F.put(`/form-templates/${t}`,e)).data,delete:async t=>(await o.F.delete(`/form-templates/${t}`)).data,getFields:async t=>(await o.F.get(`/form-templates/${t}/fields`)).data,createField:async(t,e)=>(await o.F.post(`/form-templates/${t}/fields`,e)).data,updateField:async(t,e)=>(await o.F.put(`/form-fields/${t}`,e)).data,deleteField:async t=>(await o.F.delete(`/form-fields/${t}`)).data,reorderFields:async(t,e)=>(await o.F.put(`/form-templates/${t}/fields/reorder`,{fieldIds:e})).data},s=(0,a.nY)("formTemplate",{state:()=>({templates:[],currentTemplate:null,fields:[],loading:!1,error:null}),getters:{getByProcessType:t=>e=>t.templates.filter(t=>t.procTypeId===e),getById:t=>e=>t.templates.find(t=>t.id===e)},actions:{async fetchByProcessType(t){this.loading=!0,this.error=null;try{this.templates=await i.getByProcessType(t)}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar modelos de formulário",t}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{return this.currentTemplate=await i.getById(t),this.currentTemplate}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar modelo de formulário",t}finally{this.loading=!1}},async create(t,e){try{const r=await i.create(t,e);return this.templates.push(r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar modelo de formulário",t}},async update(t,e){try{const r=await i.update(t,e),a=this.templates.findIndex(e=>e.id===t);return-1!==a&&(this.templates[a]=r),this.currentTemplate?.id===t&&(this.currentTemplate=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar modelo de formulário",t}},async remove(t){try{await i.delete(t),this.templates=this.templates.filter(e=>e.id!==t),this.currentTemplate?.id===t&&(this.currentTemplate=null,this.fields=[])}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir modelo de formulário",t}},async fetchFields(t){this.loading=!0,this.error=null;try{return this.fields=await i.getFields(t),this.fields}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar campos do formulário",t}finally{this.loading=!1}},async createField(t,e){try{const r=await i.createField(t,e);return this.fields.push(r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar campo",t}},async updateField(t,e){try{const r=await i.updateField(t,e),a=this.fields.findIndex(e=>e.id===t);return-1!==a&&(this.fields[a]=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar campo",t}},async removeField(t){try{await i.deleteField(t),this.fields=this.fields.filter(e=>e.id!==t)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir campo",t}},async reorderFields(t,e){try{const r=await i.reorderFields(t,e);return this.fields=r,r}catch(t){throw this.error=t.response?.data?.error||"Erro ao reordenar campos",t}}}})},4452(t,e,r){r.d(e,{U:()=>s});var a=r(810),o=r(9210);const i={getAll:async()=>(await o.F.get("/process-types")).data,getById:async t=>(await o.F.get(`/process-types/${t}`)).data,create:async t=>(await o.F.post("/process-types",t)).data,update:async(t,e)=>(await o.F.put(`/process-types/${t}`,e)).data,delete:async t=>(await o.F.delete(`/process-types/${t}`)).data,restore:async t=>(await o.F.put(`/process-types/${t}/restore`)).data},s=(0,a.nY)("processType",{state:()=>({processTypes:[],currentProcessType:null,loading:!1,error:null}),getters:{activeProcessTypes:t=>t.processTypes.filter(t=>t.isActive),getById:t=>e=>t.processTypes.find(t=>t.id===e)},actions:{async fetchAll(){this.loading=!0,this.error=null;try{this.processTypes=await i.getAll()}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar tipos de processo",t}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{return this.currentProcessType=await i.getById(t),this.currentProcessType}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar tipo de processo",t}finally{this.loading=!1}},async create(t){try{const e=await i.create(t);return this.processTypes.push(e),e}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar tipo de processo",t}},async update(t,e){try{const r=await i.update(t,e),a=this.processTypes.findIndex(e=>e.id===t);return-1!==a&&(this.processTypes[a]=r),this.currentProcessType?.id===t&&(this.currentProcessType=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar tipo de processo",t}},async remove(t){try{await i.delete(t),this.processTypes=this.processTypes.filter(e=>e.id!==t)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir tipo de processo",t}},async restore(t){try{const e=await i.restore(t);return this.processTypes.push(e),e}catch(t){throw this.error=t.response?.data?.error||"Erro ao restaurar tipo de processo",t}}}})},1017(t,e,r){r.d(e,{_:()=>s});var a=r(810),o=r(9210);const i={getByProcessType:async(t,e={})=>(await o.F.get(`/process-types/${t}/requests`,{params:e})).data,getById:async t=>(await o.F.get(`/requests/${t}`)).data,create:async(t,e)=>(await o.F.post(`/process-types/${t}/requests`,e)).data,update:async(t,e)=>(await o.F.put(`/requests/${t}`,e)).data,delete:async t=>(await o.F.delete(`/requests/${t}`)).data,move:async(t,e,r=null)=>(await o.F.put(`/requests/${t}/move`,{toStageId:e,comment:r})).data,search:async(t,e,r=20)=>(await o.F.get("/requests/search",{params:{query:t,groupId:e,limit:r}})).data,getHistory:async t=>(await o.F.get(`/requests/${t}/history`)).data,assign:async(t,e,r="assigned")=>(await o.F.post(`/requests/${t}/assign`,{userId:e,role:r})).data,unassign:async(t,e)=>(await o.F.delete(`/requests/${t}/assign/${e}`)).data,addLabel:async(t,e)=>(await o.F.post(`/requests/${t}/labels`,{labelId:e})).data,removeLabel:async(t,e)=>(await o.F.delete(`/requests/${t}/labels/${e}`)).data,setDeadline:async(t,e)=>(await o.F.put(`/requests/${t}/deadline`,{dueDate:e})).data},s=(0,a.nY)("request",{state:()=>({requests:[],currentRequest:null,loading:!1,error:null}),getters:{getByStage:t=>e=>t.requests.filter(t=>t.currentStageId===e),getByProcessType:t=>e=>t.requests.filter(t=>t.procTypeId===e),getById:t=>e=>t.requests.find(t=>t.id===e)},actions:{async fetchByProcessType(t,e={}){this.loading=!0,this.error=null;try{this.requests=await i.getByProcessType(t,e)}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar requisições",t}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{return this.currentRequest=await i.getById(t),this.currentRequest}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar requisição",t}finally{this.loading=!1}},async create(t,e){try{const r=await i.create(t,e);return this.requests.push(r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar requisição",t}},async update(t,e){try{const r=await i.update(t,e),a=this.requests.findIndex(e=>e.id===t);return-1!==a&&(this.requests[a]=r),this.currentRequest?.id===t&&(this.currentRequest=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar requisição",t}},async remove(t){try{await i.delete(t),this.requests=this.requests.filter(e=>e.id!==t),this.currentRequest?.id===t&&(this.currentRequest=null)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir requisição",t}},async move(t,e,r=null){try{const a=await i.move(t,e,r),o=this.requests.findIndex(e=>e.id===t);return-1!==o&&(this.requests[o]=a),this.currentRequest?.id===t&&(this.currentRequest=a),a}catch(t){throw this.error=t.response?.data?.error||"Erro ao mover requisição",t}},async search(t,e){this.loading=!0,this.error=null;try{return await i.search(t,e)}catch(t){throw this.error=t.response?.data?.error||"Erro ao buscar requisições",t}finally{this.loading=!1}}}})},7536(t,e,r){r.d(e,{A:()=>n});var a=r(1354),o=r.n(a),i=r(6314),s=r.n(i)()(o());s.push([t.id,".dynamic-form[data-v-820b369c]{display:flex;flex-wrap:wrap;gap:16px}.form-field[data-v-820b369c]{min-width:0}.form-field--full[data-v-820b369c]{width:100%;flex-basis:100%}.form-field--half[data-v-820b369c]{width:calc(50% - 8px);flex-basis:calc(50% - 8px)}.form-field--third[data-v-820b369c]{width:calc(33.333% - 11px);flex-basis:calc(33.333% - 11px)}.form-field__label[data-v-820b369c]{display:block;font-weight:500;margin-bottom:4px;font-size:14px}.form-field__label .required[data-v-820b369c]{color:var(--color-error);margin-left:2px}.form-field__input[data-v-820b369c],.form-field__textarea[data-v-820b369c],.form-field__select[data-v-820b369c]{width:100%;padding:8px 12px;border:1px solid var(--color-border);border-radius:var(--border-radius);background:var(--color-main-background);font-size:14px;color:var(--color-main-text);transition:border-color .15s}.form-field__input[data-v-820b369c]:focus,.form-field__textarea[data-v-820b369c]:focus,.form-field__select[data-v-820b369c]:focus{border-color:var(--color-primary-element);outline:none}.form-field__input[data-v-820b369c]:read-only,.form-field__textarea[data-v-820b369c]:read-only,.form-field__select[data-v-820b369c]:read-only{background:var(--color-background-dark);cursor:not-allowed}.form-field__input[data-v-820b369c]:disabled,.form-field__textarea[data-v-820b369c]:disabled,.form-field__select[data-v-820b369c]:disabled{background:var(--color-background-dark);cursor:not-allowed;opacity:.7}.form-field__textarea[data-v-820b369c]{resize:vertical;min-height:80px}.form-field__select[data-v-820b369c]{appearance:auto}.form-field__checkbox-label[data-v-820b369c]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;padding:8px 0}.form-field__checkbox-label input[type=checkbox][data-v-820b369c]{width:auto;margin:0}.form-field__checkbox-label .required[data-v-820b369c]{color:var(--color-error);margin-left:2px}.form-field__radio-group[data-v-820b369c]{display:flex;flex-direction:column;gap:8px;padding:4px 0}.form-field__radio-label[data-v-820b369c]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.form-field__radio-label input[type=radio][data-v-820b369c]{width:auto;margin:0}.form-field__help[data-v-820b369c]{margin:4px 0 0;font-size:12px;color:var(--color-text-maxcontrast);line-height:1.4}.form-field__error[data-v-820b369c]{margin:4px 0 0;font-size:12px;color:var(--color-error);line-height:1.4}@media(max-width: 600px){.form-field--half[data-v-820b369c],.form-field--third[data-v-820b369c]{width:100%;flex-basis:100%}}","",{version:3,sources:["webpack://./src/components/forms/DynamicForm.vue"],names:[],mappings:"AACA,+BACC,YAAA,CACA,cAAA,CACA,QAAA,CAGD,6BACC,WAAA,CAEA,mCACC,UAAA,CACA,eAAA,CAGD,mCACC,qBAAA,CACA,0BAAA,CAGD,oCACC,0BAAA,CACA,+BAAA,CAGD,oCACC,aAAA,CACA,eAAA,CACA,iBAAA,CACA,cAAA,CAEA,8CACC,wBAAA,CACA,eAAA,CAIF,gHAGC,UAAA,CACA,gBAAA,CACA,oCAAA,CACA,kCAAA,CACA,uCAAA,CACA,cAAA,CACA,4BAAA,CACA,4BAAA,CAEA,kIACC,yCAAA,CACA,YAAA,CAGD,8IACC,uCAAA,CACA,kBAAA,CAGD,2IACC,uCAAA,CACA,kBAAA,CACA,UAAA,CAIF,uCACC,eAAA,CACA,eAAA,CAGD,qCACC,eAAA,CAGD,6CACC,YAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,cAAA,CACA,aAAA,CAEA,kEACC,UAAA,CACA,QAAA,CAGD,uDACC,wBAAA,CACA,eAAA,CAIF,0CACC,YAAA,CACA,qBAAA,CACA,OAAA,CACA,aAAA,CAGD,0CACC,YAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,cAAA,CAEA,4DACC,UAAA,CACA,QAAA,CAIF,mCACC,cAAA,CACA,cAAA,CACA,mCAAA,CACA,eAAA,CAGD,oCACC,cAAA,CACA,cAAA,CACA,wBAAA,CACA,eAAA,CAKF,yBAEE,uEAEC,UAAA,CACA,eAAA,CAAA",sourcesContent:["\n.dynamic-form {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 16px;\n}\n\n.form-field {\n\tmin-width: 0;\n\n\t&--full {\n\t\twidth: 100%;\n\t\tflex-basis: 100%;\n\t}\n\n\t&--half {\n\t\twidth: calc(50% - 8px);\n\t\tflex-basis: calc(50% - 8px);\n\t}\n\n\t&--third {\n\t\twidth: calc(33.333% - 11px);\n\t\tflex-basis: calc(33.333% - 11px);\n\t}\n\n\t&__label {\n\t\tdisplay: block;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 4px;\n\t\tfont-size: 14px;\n\n\t\t.required {\n\t\t\tcolor: var(--color-error);\n\t\t\tmargin-left: 2px;\n\t\t}\n\t}\n\n\t&__input,\n\t&__textarea,\n\t&__select {\n\t\twidth: 100%;\n\t\tpadding: 8px 12px;\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: var(--border-radius);\n\t\tbackground: var(--color-main-background);\n\t\tfont-size: 14px;\n\t\tcolor: var(--color-main-text);\n\t\ttransition: border-color 0.15s;\n\n\t\t&:focus {\n\t\t\tborder-color: var(--color-primary-element);\n\t\t\toutline: none;\n\t\t}\n\n\t\t&:read-only {\n\t\t\tbackground: var(--color-background-dark);\n\t\t\tcursor: not-allowed;\n\t\t}\n\n\t\t&:disabled {\n\t\t\tbackground: var(--color-background-dark);\n\t\t\tcursor: not-allowed;\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\t&__textarea {\n\t\tresize: vertical;\n\t\tmin-height: 80px;\n\t}\n\n\t&__select {\n\t\tappearance: auto;\n\t}\n\n\t&__checkbox-label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\t\tcursor: pointer;\n\t\tfont-size: 14px;\n\t\tpadding: 8px 0;\n\n\t\tinput[type='checkbox'] {\n\t\t\twidth: auto;\n\t\t\tmargin: 0;\n\t\t}\n\n\t\t.required {\n\t\t\tcolor: var(--color-error);\n\t\t\tmargin-left: 2px;\n\t\t}\n\t}\n\n\t&__radio-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8px;\n\t\tpadding: 4px 0;\n\t}\n\n\t&__radio-label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\t\tcursor: pointer;\n\t\tfont-size: 14px;\n\n\t\tinput[type='radio'] {\n\t\t\twidth: auto;\n\t\t\tmargin: 0;\n\t\t}\n\t}\n\n\t&__help {\n\t\tmargin: 4px 0 0;\n\t\tfont-size: 12px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tline-height: 1.4;\n\t}\n\n\t&__error {\n\t\tmargin: 4px 0 0;\n\t\tfont-size: 12px;\n\t\tcolor: var(--color-error);\n\t\tline-height: 1.4;\n\t}\n}\n\n// Responsive: stack all fields on narrow screens\n@media (max-width: 600px) {\n\t.form-field {\n\t\t&--half,\n\t\t&--third {\n\t\t\twidth: 100%;\n\t\t\tflex-basis: 100%;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const n=s},1149(t,e,r){r.d(e,{A:()=>n});var a=r(1354),o=r.n(a),i=r(6314),s=r.n(i)()(o());s.push([t.id,".request-form[data-v-9a58411e]{max-width:800px;margin:0 auto;padding:20px}.request-form__header[data-v-9a58411e]{margin-bottom:24px}.request-form__header h2[data-v-9a58411e]{margin:0 0 4px;font-size:22px;font-weight:700}.request-form__subtitle[data-v-9a58411e]{margin:0;font-size:14px;color:var(--color-text-maxcontrast)}.request-form__loading[data-v-9a58411e]{display:flex;justify-content:center;padding:40px 0}.form-section[data-v-9a58411e]{background:var(--color-main-background);border:1px solid var(--color-border);border-radius:var(--border-radius-large);padding:20px;margin-bottom:16px}.form-section h3[data-v-9a58411e]{margin:0 0 16px;font-size:16px;font-weight:600}.form-section__desc[data-v-9a58411e]{margin:-8px 0 16px;font-size:13px;color:var(--color-text-maxcontrast)}.form-group[data-v-9a58411e]{margin-bottom:16px}.form-group label[data-v-9a58411e]{display:block;font-weight:500;margin-bottom:4px;font-size:14px}.form-group input[type=text][data-v-9a58411e],.form-group input[type=date][data-v-9a58411e],.form-group textarea[data-v-9a58411e],.form-group select[data-v-9a58411e]{width:100%;padding:8px 12px;border:1px solid var(--color-border);border-radius:var(--border-radius);background:var(--color-main-background);font-size:14px;color:var(--color-main-text);transition:border-color .15s}.form-group input[type=text][data-v-9a58411e]:focus,.form-group input[type=date][data-v-9a58411e]:focus,.form-group textarea[data-v-9a58411e]:focus,.form-group select[data-v-9a58411e]:focus{border-color:var(--color-primary-element);outline:none}.form-group textarea[data-v-9a58411e]{resize:vertical;min-height:80px}.form-group select[data-v-9a58411e]{appearance:auto}.form-group--third[data-v-9a58411e]{flex:1;min-width:0}.form-row[data-v-9a58411e]{display:flex;gap:16px;align-items:flex-start}.checkbox-label[data-v-9a58411e]{display:flex !important;align-items:center;gap:8px;cursor:pointer;padding-top:24px}.checkbox-label input[type=checkbox][data-v-9a58411e]{width:auto;margin:0}.form-actions[data-v-9a58411e]{display:flex;justify-content:flex-end;gap:8px;margin-top:24px;padding-top:16px;border-top:1px solid var(--color-border)}@media(max-width: 600px){.form-row[data-v-9a58411e]{flex-direction:column}.form-group--third[data-v-9a58411e]{width:100%}.checkbox-label[data-v-9a58411e]{padding-top:0}}","",{version:3,sources:["webpack://./src/views/RequestForm.vue"],names:[],mappings:"AACA,+BACC,eAAA,CACA,aAAA,CACA,YAAA,CAEA,uCACC,kBAAA,CAEA,0CACC,cAAA,CACA,cAAA,CACA,eAAA,CAIF,yCACC,QAAA,CACA,cAAA,CACA,mCAAA,CAGD,wCACC,YAAA,CACA,sBAAA,CACA,cAAA,CAIF,+BACC,uCAAA,CACA,oCAAA,CACA,wCAAA,CACA,YAAA,CACA,kBAAA,CAEA,kCACC,eAAA,CACA,cAAA,CACA,eAAA,CAGD,qCACC,kBAAA,CACA,cAAA,CACA,mCAAA,CAIF,6BACC,kBAAA,CAEA,mCACC,aAAA,CACA,eAAA,CACA,iBAAA,CACA,cAAA,CAGD,sKAIC,UAAA,CACA,gBAAA,CACA,oCAAA,CACA,kCAAA,CACA,uCAAA,CACA,cAAA,CACA,4BAAA,CACA,4BAAA,CAEA,8LACC,yCAAA,CACA,YAAA,CAIF,sCACC,eAAA,CACA,eAAA,CAGD,oCACC,eAAA,CAGD,oCACC,MAAA,CACA,WAAA,CAIF,2BACC,YAAA,CACA,QAAA,CACA,sBAAA,CAGD,iCACC,uBAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,gBAAA,CAEA,sDACC,UAAA,CACA,QAAA,CAIF,+BACC,YAAA,CACA,wBAAA,CACA,OAAA,CACA,eAAA,CACA,gBAAA,CACA,wCAAA,CAID,yBACC,2BACC,qBAAA,CAGD,oCACC,UAAA,CAGD,iCACC,aAAA,CAAA",sourcesContent:["\n.request-form {\n\tmax-width: 800px;\n\tmargin: 0 auto;\n\tpadding: 20px;\n\n\t&__header {\n\t\tmargin-bottom: 24px;\n\n\t\th2 {\n\t\t\tmargin: 0 0 4px;\n\t\t\tfont-size: 22px;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\n\t&__subtitle {\n\t\tmargin: 0;\n\t\tfont-size: 14px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__loading {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tpadding: 40px 0;\n\t}\n}\n\n.form-section {\n\tbackground: var(--color-main-background);\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tpadding: 20px;\n\tmargin-bottom: 16px;\n\n\th3 {\n\t\tmargin: 0 0 16px;\n\t\tfont-size: 16px;\n\t\tfont-weight: 600;\n\t}\n\n\t&__desc {\n\t\tmargin: -8px 0 16px;\n\t\tfont-size: 13px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n.form-group {\n\tmargin-bottom: 16px;\n\n\tlabel {\n\t\tdisplay: block;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 4px;\n\t\tfont-size: 14px;\n\t}\n\n\tinput[type='text'],\n\tinput[type='date'],\n\ttextarea,\n\tselect {\n\t\twidth: 100%;\n\t\tpadding: 8px 12px;\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: var(--border-radius);\n\t\tbackground: var(--color-main-background);\n\t\tfont-size: 14px;\n\t\tcolor: var(--color-main-text);\n\t\ttransition: border-color 0.15s;\n\n\t\t&:focus {\n\t\t\tborder-color: var(--color-primary-element);\n\t\t\toutline: none;\n\t\t}\n\t}\n\n\ttextarea {\n\t\tresize: vertical;\n\t\tmin-height: 80px;\n\t}\n\n\tselect {\n\t\tappearance: auto;\n\t}\n\n\t&--third {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n}\n\n.form-row {\n\tdisplay: flex;\n\tgap: 16px;\n\talign-items: flex-start;\n}\n\n.checkbox-label {\n\tdisplay: flex !important;\n\talign-items: center;\n\tgap: 8px;\n\tcursor: pointer;\n\tpadding-top: 24px;\n\n\tinput[type='checkbox'] {\n\t\twidth: auto;\n\t\tmargin: 0;\n\t}\n}\n\n.form-actions {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8px;\n\tmargin-top: 24px;\n\tpadding-top: 16px;\n\tborder-top: 1px solid var(--color-border);\n}\n\n// Responsive: stack form-row on narrow screens\n@media (max-width: 600px) {\n\t.form-row {\n\t\tflex-direction: column;\n\t}\n\n\t.form-group--third {\n\t\twidth: 100%;\n\t}\n\n\t.checkbox-label {\n\t\tpadding-top: 0;\n\t}\n}\n"],sourceRoot:""}]);const n=s},4786(t,e,r){r.r(e),r.d(e,{default:()=>$});var a=r(4095),o=r(8289),i=r(5289);const s={name:"DynamicForm",props:{fields:{type:Array,required:!0},values:{type:Object,default:()=>({})},readonly:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})}},computed:{visibleFields(){return this.fields.filter(t=>!t.isHidden&&(!(t.conditional&&Object.keys(t.conditional).length>0)||this.evaluateConditional(t.conditional)))}},methods:{updateValue(t,e){this.$emit("update:values",{...this.values,[t]:e})},isTextInput:t=>["text","email","phone","cpf","cnpj"].includes(t),getInputType:t=>({text:"text",email:"email",phone:"tel",cpf:"text",cnpj:"text"}[t]||"text"),evaluateConditional(t){if(!t||!t.field)return!0;const e=this.values[t.field],r=t.operator||"equals",a=t.value;switch(r){case"equals":return e===a;case"not_equals":return e!==a;case"filled":return null!=e&&""!==e;case"empty":return null==e||""===e;default:return!0}}}};var n=r(5072),l=r.n(n),d=r(7825),c=r.n(d),A=r(7659),p=r.n(A),u=r(5056),m=r.n(u),f=r(540),C=r.n(f),h=r(1113),y=r.n(h),v=r(7536),g={};g.styleTagTransform=y(),g.setAttributes=m(),g.insert=p().bind(null,"head"),g.domAPI=c(),g.insertStyleElement=C();l()(v.A,g);v.A&&v.A.locals&&v.A.locals;var x=r(4486);const _=(0,x.A)(s,function(){var t=this,e=t._self._c;return e("div",{staticClass:"dynamic-form"},t._l(t.visibleFields,function(r){return e("div",{key:r.id,class:["form-field",`form-field--${r.width||"full"}`]},["checkbox"!==r.fieldType?e("label",{staticClass:"form-field__label",attrs:{for:`field-${r.name}`}},[t._v("\n\t\t\t"+t._s(r.label)+"\n\t\t\t"),r.isRequired?e("span",{staticClass:"required"},[t._v("*")]):t._e()]):t._e(),t._v(" "),t.isTextInput(r.fieldType)?e("input",{staticClass:"form-field__input",attrs:{id:`field-${r.name}`,type:t.getInputType(r.fieldType),placeholder:r.placeholder,required:r.isRequired,readonly:t.readonly},domProps:{value:t.values[r.name]},on:{input:function(e){return t.updateValue(r.name,e.target.value)}}}):"number"===r.fieldType||"currency"===r.fieldType?e("input",{staticClass:"form-field__input",attrs:{id:`field-${r.name}`,type:"number",placeholder:r.placeholder,required:r.isRequired,readonly:t.readonly,step:"currency"===r.fieldType?"0.01":"any"},domProps:{value:t.values[r.name]},on:{input:function(e){return t.updateValue(r.name,e.target.value)}}}):"date"===r.fieldType?e("input",{staticClass:"form-field__input",attrs:{id:`field-${r.name}`,type:"date",placeholder:r.placeholder,required:r.isRequired,readonly:t.readonly},domProps:{value:t.values[r.name]},on:{input:function(e){return t.updateValue(r.name,e.target.value)}}}):"textarea"===r.fieldType?e("textarea",{staticClass:"form-field__textarea",attrs:{id:`field-${r.name}`,placeholder:r.placeholder,required:r.isRequired,readonly:t.readonly,rows:"4"},domProps:{value:t.values[r.name]},on:{input:function(e){return t.updateValue(r.name,e.target.value)}}}):"select"===r.fieldType?e("select",{staticClass:"form-field__select",attrs:{id:`field-${r.name}`,required:r.isRequired,disabled:t.readonly},domProps:{value:t.values[r.name]},on:{change:function(e){return t.updateValue(r.name,e.target.value)}}},[e("option",{attrs:{value:""}},[t._v("\n\t\t\t\t"+t._s(r.placeholder||"Selecione...")+"\n\t\t\t")]),t._v(" "),t._l(r.options||[],function(r){return e("option",{key:r.value,domProps:{value:r.value}},[t._v("\n\t\t\t\t"+t._s(r.label)+"\n\t\t\t")])})],2):"checkbox"===r.fieldType?e("label",{staticClass:"form-field__checkbox-label",attrs:{for:`field-${r.name}`}},[e("input",{attrs:{id:`field-${r.name}`,type:"checkbox",disabled:t.readonly},domProps:{checked:t.values[r.name]},on:{change:function(e){return t.updateValue(r.name,e.target.checked)}}}),t._v("\n\t\t\t"+t._s(r.label)+"\n\t\t\t"),r.isRequired?e("span",{staticClass:"required"},[t._v("*")]):t._e()]):"radio"===r.fieldType?e("div",{staticClass:"form-field__radio-group"},t._l(r.options||[],function(a){return e("label",{key:a.value,staticClass:"form-field__radio-label"},[e("input",{attrs:{type:"radio",name:`field-${r.name}`,disabled:t.readonly},domProps:{value:a.value,checked:t.values[r.name]===a.value},on:{change:function(e){return t.updateValue(r.name,a.value)}}}),t._v("\n\t\t\t\t"+t._s(a.label)+"\n\t\t\t")])}),0):"file"===r.fieldType?e("input",{staticClass:"form-field__input",attrs:{id:`field-${r.name}`,type:"file",required:r.isRequired,disabled:t.readonly},on:{change:function(e){return t.updateValue(r.name,e.target.files)}}}):"user_select"===r.fieldType?e("input",{staticClass:"form-field__input",attrs:{id:`field-${r.name}`,type:"text",placeholder:r.placeholder||"Buscar usuário...",required:r.isRequired,readonly:t.readonly},domProps:{value:t.values[r.name]},on:{input:function(e){return t.updateValue(r.name,e.target.value)}}}):t._e(),t._v(" "),r.helpText?e("p",{staticClass:"form-field__help"},[t._v("\n\t\t\t"+t._s(r.helpText)+"\n\t\t")]):t._e(),t._v(" "),t.errors[r.name]?e("p",{staticClass:"form-field__error"},[t._v("\n\t\t\t"+t._s(t.errors[r.name])+"\n\t\t")]):t._e()])}),0)},[],!1,null,"820b369c",null).exports;var b=r(1017),w=r(4617),q=r(4452);const T={name:"RequestForm",components:{NcButton:a.A,NcLoadingIcon:o.A,DynamicForm:_},data:()=>({form:{title:"",description:"",priority:2,dueDate:null,isConfidential:!1},formValues:{},formTemplates:[],templateFields:{},processTypeName:"",loadingData:!0,saving:!1}),computed:{processTypeId(){return Number(this.$route.params.processTypeId||this.$route.params.id)},requestId(){return this.$route.params.id&&"editRequest"===this.$route.name?Number(this.$route.params.id):null},isEditing(){return null!==this.requestId}},created(){this.loadInitialData()},methods:{async loadInitialData(){this.loadingData=!0;try{const t=(0,q.U)(),e=(0,w.D)(),r=(0,b._)();if(this.isEditing){const e=await r.fetchById(this.requestId);this.form.title=e.title||"",this.form.description=e.description||"",this.form.priority=e.priority||2,this.form.dueDate=e.dueDate?e.dueDate.substring(0,10):null,this.form.isConfidential=e.isConfidential||!1;const a=await t.fetchById(e.procTypeId);this.processTypeName=a.name}else{const e=await t.fetchById(this.processTypeId);this.processTypeName=e.name}const a=this.isEditing?(await r.fetchById(this.requestId)).procTypeId:this.processTypeId;await e.fetchByProcessType(a),this.formTemplates=e.templates;for(const t of this.formTemplates){const r=await e.fetchFields(t.id);this.$set(this.templateFields,t.id,r),this.formValues[t.id]||this.$set(this.formValues,t.id,{})}}catch(t){(0,i.Qg)("Erro ao carregar dados do formulário"),console.error("RequestForm loadInitialData error:",t)}finally{this.loadingData=!1}},updateTemplateValues(t,e){this.$set(this.formValues,t,e)},async submitForm(){if(this.form.title.trim()){this.saving=!0;try{const t=(0,b._)();this.isEditing?(await t.update(this.requestId,{title:this.form.title,description:this.form.description,priority:this.form.priority,dueDate:this.form.dueDate,isConfidential:this.form.isConfidential}),(0,i.Te)("Requisição atualizada com sucesso")):(await t.create(this.processTypeId,{title:this.form.title,description:this.form.description,priority:this.form.priority,dueDate:this.form.dueDate,isConfidential:this.form.isConfidential,groupId:this.getGroupId()}),(0,i.Te)("Requisição criada com sucesso")),this.$router.push({name:"kanbanBoard",params:{processTypeId:this.getTargetProcessTypeId()}})}catch(t){const e=t.response?.data?.error||"Erro ao salvar requisição";(0,i.Qg)(e),console.error("RequestForm submit error:",t)}finally{this.saving=!1}}else(0,i.Qg)("O título é obrigatório")},getGroupId(){const t=(0,q.U)();return t.currentProcessType?.groupId||""},getTargetProcessTypeId(){if(this.isEditing){const t=(0,b._)();return t.currentRequest?.procTypeId||this.processTypeId}return this.processTypeId}}},k=T;var I=r(1149),B={};B.styleTagTransform=y(),B.setAttributes=m(),B.insert=p().bind(null,"head"),B.domAPI=c(),B.insertStyleElement=C();l()(I.A,B);I.A&&I.A.locals&&I.A.locals;var F=(0,x.A)(k,function(){var t=this,e=t._self._c;return e("div",{staticClass:"request-form"},[e("div",{staticClass:"request-form__header"},[e("h2",[t._v(t._s(t.isEditing?"Editar Requisição":"Nova Requisição"))]),t._v(" "),t.processTypeName?e("p",{staticClass:"request-form__subtitle"},[t._v(t._s(t.processTypeName))]):t._e()]),t._v(" "),t.loadingData?e("NcLoadingIcon",{staticClass:"request-form__loading"}):e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-section"},[e("h3",[t._v("Informações Básicas")]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"req-title"}},[t._v("Título *")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],attrs:{id:"req-title",type:"text",required:"",placeholder:"Título da requisição"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"req-description"}},[t._v("Descrição")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],attrs:{id:"req-description",rows:"4",placeholder:"Descreva a requisição..."},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group form-group--third"},[e("label",{attrs:{for:"req-priority"}},[t._v("Prioridade")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.form.priority,expression:"form.priority",modifiers:{number:!0}}],attrs:{id:"req-priority"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.form,"priority",e.target.multiple?r:r[0])}}},[e("option",{domProps:{value:1}},[t._v("Urgente")]),t._v(" "),e("option",{attrs:{selected:""},domProps:{value:2}},[t._v("Normal")]),t._v(" "),e("option",{domProps:{value:3}},[t._v("Baixa")])])]),t._v(" "),e("div",{staticClass:"form-group form-group--third"},[e("label",{attrs:{for:"req-due"}},[t._v("Prazo")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.dueDate,expression:"form.dueDate"}],attrs:{id:"req-due",type:"date"},domProps:{value:t.form.dueDate},on:{input:function(e){e.target.composing||t.$set(t.form,"dueDate",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group form-group--third"},[e("label",{staticClass:"checkbox-label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.isConfidential,expression:"form.isConfidential"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.isConfidential)?t._i(t.form.isConfidential,null)>-1:t.form.isConfidential},on:{change:function(e){var r=t.form.isConfidential,a=e.target,o=!!a.checked;if(Array.isArray(r)){var i=t._i(r,null);a.checked?i<0&&t.$set(t.form,"isConfidential",r.concat([null])):i>-1&&t.$set(t.form,"isConfidential",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"isConfidential",o)}}}),t._v("\n\t\t\t\t\t\tConfidencial\n\t\t\t\t\t")])])])]),t._v(" "),t._l(t.formTemplates,function(r){return e("div",{key:r.id,staticClass:"form-section"},[e("h3",[t._v(t._s(r.name))]),t._v(" "),r.description?e("p",{staticClass:"form-section__desc"},[t._v(t._s(r.description))]):t._e(),t._v(" "),e("DynamicForm",{attrs:{fields:t.templateFields[r.id]||[],values:t.formValues[r.id]||{},errors:{}},on:{"update:values":function(e){return t.updateTemplateValues(r.id,e)}}})],1)}),t._v(" "),e("div",{staticClass:"form-actions"},[e("NcButton",{attrs:{type:"tertiary"},on:{click:function(e){return t.$router.back()}}},[t._v("Cancelar")]),t._v(" "),e("NcButton",{attrs:{type:"primary","native-type":"submit",disabled:t.saving}},[t._v("\n\t\t\t\t"+t._s(t.saving?"Salvando...":t.isEditing?"Salvar Alterações":"Criar Requisição")+"\n\t\t\t")])],1)],2)],1)},[],!1,null,"9a58411e",null);const $=F.exports},4095(t,e,r){r.d(e,{A:()=>a.N});var a=r(4294)}}]);
//# sourceMappingURL=tramita-src_views_RequestForm_vue.js.map?v=49feef93e5c378dbeccb