"use strict";(self.webpackChunktramita=self.webpackChunktramita||[]).push([["src_views_FormTemplateEditor_vue"],{9210(e,t,a){a.d(t,{F:()=>i});var r=a(6802);const o=(0,a(3814).Jv)("/apps/tramita/api/v1"),i=r.Ay.create({baseURL:o});i.interceptors.response.use(e=>e,e=>(402===e.response?.status&&window.dispatchEvent(new CustomEvent("tramita:license-required")),Promise.reject(e)))},4617(e,t,a){a.d(t,{D:()=>l});var r=a(810),o=a(9210);const i={getByProcessType:async e=>(await o.F.get(`/process-types/${e}/form-templates`)).data,getById:async e=>(await o.F.get(`/form-templates/${e}`)).data,create:async(e,t)=>(await o.F.post(`/process-types/${e}/form-templates`,t)).data,update:async(e,t)=>(await o.F.put(`/form-templates/${e}`,t)).data,delete:async e=>(await o.F.delete(`/form-templates/${e}`)).data,getFields:async e=>(await o.F.get(`/form-templates/${e}/fields`)).data,createField:async(e,t)=>(await o.F.post(`/form-templates/${e}/fields`,t)).data,updateField:async(e,t)=>(await o.F.put(`/form-fields/${e}`,t)).data,deleteField:async e=>(await o.F.delete(`/form-fields/${e}`)).data,reorderFields:async(e,t)=>(await o.F.put(`/form-templates/${e}/fields/reorder`,{fieldIds:t})).data},l=(0,r.nY)("formTemplate",{state:()=>({templates:[],currentTemplate:null,fields:[],loading:!1,error:null}),getters:{getByProcessType:e=>t=>e.templates.filter(e=>e.procTypeId===t),getById:e=>t=>e.templates.find(e=>e.id===t)},actions:{async fetchByProcessType(e){this.loading=!0,this.error=null;try{this.templates=await i.getByProcessType(e)}catch(e){throw this.error=e.response?.data?.error||"Erro ao carregar modelos de formulário",e}finally{this.loading=!1}},async fetchById(e){this.loading=!0,this.error=null;try{return this.currentTemplate=await i.getById(e),this.currentTemplate}catch(e){throw this.error=e.response?.data?.error||"Erro ao carregar modelo de formulário",e}finally{this.loading=!1}},async create(e,t){try{const a=await i.create(e,t);return this.templates.push(a),a}catch(e){throw this.error=e.response?.data?.error||"Erro ao criar modelo de formulário",e}},async update(e,t){try{const a=await i.update(e,t),r=this.templates.findIndex(t=>t.id===e);return-1!==r&&(this.templates[r]=a),this.currentTemplate?.id===e&&(this.currentTemplate=a),a}catch(e){throw this.error=e.response?.data?.error||"Erro ao atualizar modelo de formulário",e}},async remove(e){try{await i.delete(e),this.templates=this.templates.filter(t=>t.id!==e),this.currentTemplate?.id===e&&(this.currentTemplate=null,this.fields=[])}catch(e){throw this.error=e.response?.data?.error||"Erro ao excluir modelo de formulário",e}},async fetchFields(e){this.loading=!0,this.error=null;try{return this.fields=await i.getFields(e),this.fields}catch(e){throw this.error=e.response?.data?.error||"Erro ao carregar campos do formulário",e}finally{this.loading=!1}},async createField(e,t){try{const a=await i.createField(e,t);return this.fields.push(a),a}catch(e){throw this.error=e.response?.data?.error||"Erro ao criar campo",e}},async updateField(e,t){try{const a=await i.updateField(e,t),r=this.fields.findIndex(t=>t.id===e);return-1!==r&&(this.fields[r]=a),a}catch(e){throw this.error=e.response?.data?.error||"Erro ao atualizar campo",e}},async removeField(e){try{await i.deleteField(e),this.fields=this.fields.filter(t=>t.id!==e)}catch(e){throw this.error=e.response?.data?.error||"Erro ao excluir campo",e}},async reorderFields(e,t){try{const a=await i.reorderFields(e,t);return this.fields=a,a}catch(e){throw this.error=e.response?.data?.error||"Erro ao reordenar campos",e}}}})},4793(e,t,a){a.d(t,{A:()=>n});var r=a(1354),o=a.n(r),i=a(6314),l=a.n(i)()(o());l.push([e.id,".tramita-form-editor[data-v-dc02d33a]{height:100%;padding:16px}.form-editor-layout[data-v-dc02d33a]{display:flex;gap:24px;height:calc(100vh - 100px)}.form-editor-sidebar[data-v-dc02d33a]{width:300px;min-width:260px;border-right:1px solid var(--color-border);padding-right:16px;overflow-y:auto}.form-editor-sidebar .sidebar-header[data-v-dc02d33a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.form-editor-sidebar .sidebar-header h3[data-v-dc02d33a]{margin:0;font-size:16px}.template-list[data-v-dc02d33a]{list-style:none;padding:0;margin:0}.template-item[data-v-dc02d33a]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:10px 12px;border-radius:var(--border-radius-large);cursor:pointer;transition:background-color .15s}.template-item[data-v-dc02d33a]:hover{background-color:var(--color-background-hover)}.template-item.active[data-v-dc02d33a]{background-color:var(--color-primary-element-light)}.template-item .template-name[data-v-dc02d33a]{flex:1;font-weight:500}.template-item .required-badge[data-v-dc02d33a]{font-size:11px;background-color:var(--color-warning);color:#fff;padding:2px 6px;border-radius:10px}.template-item .template-actions[data-v-dc02d33a]{display:flex;gap:0}.form-editor-main[data-v-dc02d33a]{flex:1;overflow-y:auto}.form-editor-main .main-header[data-v-dc02d33a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.form-editor-main .main-header h3[data-v-dc02d33a]{margin:0;font-size:18px}.field-card[data-v-dc02d33a]{display:flex;align-items:center;gap:12px;padding:12px 16px;border:1px solid var(--color-border);border-radius:var(--border-radius-large);margin-bottom:8px;background:var(--color-main-background);transition:box-shadow .15s}.field-card[data-v-dc02d33a]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08)}.field-card .drag-handle[data-v-dc02d33a]{cursor:grab;color:var(--color-text-maxcontrast)}.field-card .drag-handle[data-v-dc02d33a]:active{cursor:grabbing}.field-card .field-info[data-v-dc02d33a]{flex:1;min-width:0}.field-card .field-info .field-header[data-v-dc02d33a]{display:flex;align-items:center;gap:6px;margin-bottom:2px}.field-card .field-info .field-type-icon[data-v-dc02d33a]{color:var(--color-primary-element)}.field-card .field-info .field-type-badge[data-v-dc02d33a]{font-size:11px;background-color:var(--color-background-dark);padding:1px 6px;border-radius:8px;color:var(--color-text-maxcontrast)}.field-card .field-info .field-label[data-v-dc02d33a]{font-weight:500}.field-card .field-info .required-indicator[data-v-dc02d33a]{color:var(--color-error);font-weight:bold}.field-card .field-info .field-name[data-v-dc02d33a]{font-family:monospace;font-size:12px;color:var(--color-text-maxcontrast)}.field-card .field-width-badge[data-v-dc02d33a]{font-size:11px;background-color:var(--color-background-dark);padding:2px 8px;border-radius:8px;color:var(--color-text-maxcontrast);white-space:nowrap}.field-card .field-actions[data-v-dc02d33a]{display:flex;gap:0}.modal-content[data-v-dc02d33a]{padding:24px}.modal-content h3[data-v-dc02d33a]{margin-top:0;margin-bottom:16px}.form-group[data-v-dc02d33a]{margin-bottom:16px}.form-group label[data-v-dc02d33a]{display:block;font-weight:500;margin-bottom:4px}.form-group input[type=text][data-v-dc02d33a],.form-group input[type=number][data-v-dc02d33a],.form-group textarea[data-v-dc02d33a]{width:100%;padding:8px 12px;border:1px solid var(--color-border);border-radius:var(--border-radius);background:var(--color-main-background);font-size:14px}.form-group input[type=text][data-v-dc02d33a]:focus,.form-group input[type=number][data-v-dc02d33a]:focus,.form-group textarea[data-v-dc02d33a]:focus{border-color:var(--color-primary-element);outline:none}.form-group .monospace[data-v-dc02d33a]{font-family:monospace}.form-group--half[data-v-dc02d33a]{flex:1;min-width:0}.form-row[data-v-dc02d33a]{display:flex;gap:16px}.checkbox-label[data-v-dc02d33a]{display:flex !important;align-items:center;gap:8px;cursor:pointer;font-weight:normal !important}.checkbox-label input[type=checkbox][data-v-dc02d33a]{width:auto}.options-editor[data-v-dc02d33a]{margin-bottom:16px;padding:12px;border:1px solid var(--color-border);border-radius:var(--border-radius-large);background:var(--color-background-dark)}.options-editor>label[data-v-dc02d33a]{display:block;font-weight:500;margin-bottom:8px}.options-editor .option-row[data-v-dc02d33a]{display:flex;gap:8px;margin-bottom:8px;align-items:center}.options-editor .option-row .option-input[data-v-dc02d33a]{flex:1;padding:6px 10px;border:1px solid var(--color-border);border-radius:var(--border-radius);background:var(--color-main-background);font-size:13px}.modal-actions[data-v-dc02d33a]{display:flex;justify-content:flex-end;gap:8px;margin-top:20px;padding-top:16px;border-top:1px solid var(--color-border)}","",{version:3,sources:["webpack://./src/views/FormTemplateEditor.vue"],names:[],mappings:"AACA,sCACC,WAAA,CACA,YAAA,CAGD,qCACC,YAAA,CACA,QAAA,CACA,0BAAA,CAGD,sCACC,WAAA,CACA,eAAA,CACA,0CAAA,CACA,kBAAA,CACA,eAAA,CAEA,sDACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CAEA,yDACC,QAAA,CACA,cAAA,CAKH,gCACC,eAAA,CACA,SAAA,CACA,QAAA,CAGD,gCACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,OAAA,CACA,iBAAA,CACA,wCAAA,CACA,cAAA,CACA,gCAAA,CAEA,sCACC,8CAAA,CAGD,uCACC,mDAAA,CAGD,+CACC,MAAA,CACA,eAAA,CAGD,gDACC,cAAA,CACA,qCAAA,CACA,UAAA,CACA,eAAA,CACA,kBAAA,CAGD,kDACC,YAAA,CACA,KAAA,CAIF,mCACC,MAAA,CACA,eAAA,CAEA,gDACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CAEA,mDACC,QAAA,CACA,cAAA,CAKH,6BACC,YAAA,CACA,kBAAA,CACA,QAAA,CACA,iBAAA,CACA,oCAAA,CACA,wCAAA,CACA,iBAAA,CACA,uCAAA,CACA,0BAAA,CAEA,mCACC,oCAAA,CAGD,0CACC,WAAA,CACA,mCAAA,CAEA,iDACC,eAAA,CAIF,yCACC,MAAA,CACA,WAAA,CAEA,uDACC,YAAA,CACA,kBAAA,CACA,OAAA,CACA,iBAAA,CAGD,0DACC,kCAAA,CAGD,2DACC,cAAA,CACA,6CAAA,CACA,eAAA,CACA,iBAAA,CACA,mCAAA,CAGD,sDACC,eAAA,CAGD,6DACC,wBAAA,CACA,gBAAA,CAGD,qDACC,qBAAA,CACA,cAAA,CACA,mCAAA,CAIF,gDACC,cAAA,CACA,6CAAA,CACA,eAAA,CACA,iBAAA,CACA,mCAAA,CACA,kBAAA,CAGD,4CACC,YAAA,CACA,KAAA,CAKF,gCACC,YAAA,CAEA,mCACC,YAAA,CACA,kBAAA,CAIF,6BACC,kBAAA,CAEA,mCACC,aAAA,CACA,eAAA,CACA,iBAAA,CAGD,oIAGC,UAAA,CACA,gBAAA,CACA,oCAAA,CACA,kCAAA,CACA,uCAAA,CACA,cAAA,CAEA,sJACC,yCAAA,CACA,YAAA,CAIF,wCACC,qBAAA,CAGD,mCACC,MAAA,CACA,WAAA,CAIF,2BACC,YAAA,CACA,QAAA,CAGD,iCACC,uBAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,6BAAA,CAEA,sDACC,UAAA,CAIF,iCACC,kBAAA,CACA,YAAA,CACA,oCAAA,CACA,wCAAA,CACA,uCAAA,CAEA,uCACC,aAAA,CACA,eAAA,CACA,iBAAA,CAGD,6CACC,YAAA,CACA,OAAA,CACA,iBAAA,CACA,kBAAA,CAEA,2DACC,MAAA,CACA,gBAAA,CACA,oCAAA,CACA,kCAAA,CACA,uCAAA,CACA,cAAA,CAKH,gCACC,YAAA,CACA,wBAAA,CACA,OAAA,CACA,eAAA,CACA,gBAAA,CACA,wCAAA",sourcesContent:["\n.tramita-form-editor {\n\theight: 100%;\n\tpadding: 16px;\n}\n\n.form-editor-layout {\n\tdisplay: flex;\n\tgap: 24px;\n\theight: calc(100vh - 100px);\n}\n\n.form-editor-sidebar {\n\twidth: 300px;\n\tmin-width: 260px;\n\tborder-right: 1px solid var(--color-border);\n\tpadding-right: 16px;\n\toverflow-y: auto;\n\n\t.sidebar-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 16px;\n\n\t\th3 {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n}\n\n.template-list {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n}\n\n.template-item {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tgap: 8px;\n\tpadding: 10px 12px;\n\tborder-radius: var(--border-radius-large);\n\tcursor: pointer;\n\ttransition: background-color 0.15s;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&.active {\n\t\tbackground-color: var(--color-primary-element-light);\n\t}\n\n\t.template-name {\n\t\tflex: 1;\n\t\tfont-weight: 500;\n\t}\n\n\t.required-badge {\n\t\tfont-size: 11px;\n\t\tbackground-color: var(--color-warning);\n\t\tcolor: white;\n\t\tpadding: 2px 6px;\n\t\tborder-radius: 10px;\n\t}\n\n\t.template-actions {\n\t\tdisplay: flex;\n\t\tgap: 0;\n\t}\n}\n\n.form-editor-main {\n\tflex: 1;\n\toverflow-y: auto;\n\n\t.main-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 16px;\n\n\t\th3 {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 18px;\n\t\t}\n\t}\n}\n\n.field-card {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12px;\n\tpadding: 12px 16px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tmargin-bottom: 8px;\n\tbackground: var(--color-main-background);\n\ttransition: box-shadow 0.15s;\n\n\t&:hover {\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n\t}\n\n\t.drag-handle {\n\t\tcursor: grab;\n\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t&:active {\n\t\t\tcursor: grabbing;\n\t\t}\n\t}\n\n\t.field-info {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\n\t\t.field-header {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 6px;\n\t\t\tmargin-bottom: 2px;\n\t\t}\n\n\t\t.field-type-icon {\n\t\t\tcolor: var(--color-primary-element);\n\t\t}\n\n\t\t.field-type-badge {\n\t\t\tfont-size: 11px;\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t\tpadding: 1px 6px;\n\t\t\tborder-radius: 8px;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t.field-label {\n\t\t\tfont-weight: 500;\n\t\t}\n\n\t\t.required-indicator {\n\t\t\tcolor: var(--color-error);\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t.field-name {\n\t\t\tfont-family: monospace;\n\t\t\tfont-size: 12px;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\n\t.field-width-badge {\n\t\tfont-size: 11px;\n\t\tbackground-color: var(--color-background-dark);\n\t\tpadding: 2px 8px;\n\t\tborder-radius: 8px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t}\n\n\t.field-actions {\n\t\tdisplay: flex;\n\t\tgap: 0;\n\t}\n}\n\n// Modal styles\n.modal-content {\n\tpadding: 24px;\n\n\th3 {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 16px;\n\t}\n}\n\n.form-group {\n\tmargin-bottom: 16px;\n\n\tlabel {\n\t\tdisplay: block;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 4px;\n\t}\n\n\tinput[type='text'],\n\tinput[type='number'],\n\ttextarea {\n\t\twidth: 100%;\n\t\tpadding: 8px 12px;\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: var(--border-radius);\n\t\tbackground: var(--color-main-background);\n\t\tfont-size: 14px;\n\n\t\t&:focus {\n\t\t\tborder-color: var(--color-primary-element);\n\t\t\toutline: none;\n\t\t}\n\t}\n\n\t.monospace {\n\t\tfont-family: monospace;\n\t}\n\n\t&--half {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n}\n\n.form-row {\n\tdisplay: flex;\n\tgap: 16px;\n}\n\n.checkbox-label {\n\tdisplay: flex !important;\n\talign-items: center;\n\tgap: 8px;\n\tcursor: pointer;\n\tfont-weight: normal !important;\n\n\tinput[type='checkbox'] {\n\t\twidth: auto;\n\t}\n}\n\n.options-editor {\n\tmargin-bottom: 16px;\n\tpadding: 12px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tbackground: var(--color-background-dark);\n\n\t> label {\n\t\tdisplay: block;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 8px;\n\t}\n\n\t.option-row {\n\t\tdisplay: flex;\n\t\tgap: 8px;\n\t\tmargin-bottom: 8px;\n\t\talign-items: center;\n\n\t\t.option-input {\n\t\t\tflex: 1;\n\t\t\tpadding: 6px 10px;\n\t\t\tborder: 1px solid var(--color-border);\n\t\t\tborder-radius: var(--border-radius);\n\t\t\tbackground: var(--color-main-background);\n\t\t\tfont-size: 13px;\n\t\t}\n\t}\n}\n\n.modal-actions {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8px;\n\tmargin-top: 20px;\n\tpadding-top: 16px;\n\tborder-top: 1px solid var(--color-border);\n}\n"],sourceRoot:""}]);const n=l},6484(e,t,a){a.r(t),a.d(t,{default:()=>S});var r=a(6936),o=a(5289),i=a(432),l=a.n(i),n=a(6078),d=a(2413),s=a(4997),c=a(8290),p=a(1794),A=a(878),m=a(9052),u=a(4941),C=a(5707),f=a(3635),v=a(5716),h=a(2040),g=a(8790),x=a(3581),b=a(6035),y=a(6362),F=a(9452),w=a(4617);const k={name:"FormTemplateEditor",components:{NcButton:r.x1,NcModal:r.FH,NcEmptyContent:r.yI,NcLoadingIcon:r.ne,NcSelect:r.EQ,draggable:l(),Plus:n.A,Pencil:d.A,Delete:s.A,DragHorizontalVariant:c.A,TextBoxOutline:p.A,Numeric:A.A,CalendarRange:m.A,FormatListBulleted:u.A,TextLong:C.A,FileOutline:f.A,CheckboxMarkedOutline:v.A,RadioboxMarked:h.A,EmailOutline:g.A,Phone:x.A,CurrencyUsd:b.A,AccountOutline:y.A,CardAccountDetailsOutline:F.A},data:()=>({processTypeId:null,selectedTemplateId:null,showAddTemplate:!1,editingTemplate:null,templateForm:{name:"",description:"",isRequired:!1},showFieldModal:!1,editingField:null,fieldForm:{name:"",label:"",fieldType:"text",placeholder:"",helpText:"",isRequired:!1,width:"full",options:[]},fieldTypeOptions:[{value:"text",label:"Texto"},{value:"number",label:"Número"},{value:"date",label:"Data"},{value:"select",label:"Lista de seleção"},{value:"textarea",label:"Área de texto"},{value:"file",label:"Arquivo"},{value:"checkbox",label:"Caixa de seleção"},{value:"radio",label:"Botão de rádio"},{value:"email",label:"E-mail"},{value:"cpf",label:"CPF"},{value:"cnpj",label:"CNPJ"},{value:"phone",label:"Telefone"},{value:"currency",label:"Moeda"},{value:"user_select",label:"Seletor de usuário"}],widthOptions:[{value:"full",label:"Inteira"},{value:"half",label:"Meia"},{value:"third",label:"Um terço"}]}),computed:{store:()=>(0,w.D)(),templates(){return this.store.templates},fields(){return this.store.fields},sortableFields:{get(){return[...this.store.fields]},set(e){this.store.fields=e}},currentTemplateName(){const e=this.templates.find(e=>e.id===this.selectedTemplateId);return e?e.name:""}},created(){this.processTypeId=parseInt(this.$route.params.id,10),this.loadTemplates()},methods:{async loadTemplates(){try{await this.store.fetchByProcessType(this.processTypeId)}catch(e){(0,o.Qg)("Erro ao carregar modelos de formulário")}},async selectTemplate(e){this.selectedTemplateId=e.id;try{await this.store.fetchFields(e.id)}catch(e){(0,o.Qg)("Erro ao carregar campos")}},editTemplate(e){this.editingTemplate=e,this.templateForm={name:e.name,description:e.description||"",isRequired:e.isRequired}},closeTemplateModal(){this.showAddTemplate=!1,this.editingTemplate=null,this.templateForm={name:"",description:"",isRequired:!1}},async saveTemplate(){if(this.templateForm.name.trim())try{if(this.editingTemplate)await this.store.update(this.editingTemplate.id,{name:this.templateForm.name,description:this.templateForm.description,isRequired:this.templateForm.isRequired}),(0,o.Te)("Modelo atualizado");else{const e=await this.store.create(this.processTypeId,{name:this.templateForm.name,description:this.templateForm.description,isRequired:this.templateForm.isRequired});this.selectTemplate(e),(0,o.Te)("Modelo criado")}this.closeTemplateModal()}catch(e){(0,o.Qg)(e.response?.data?.error||"Erro ao salvar modelo")}else(0,o.Qg)("O nome é obrigatório")},async confirmDeleteTemplate(e){if(confirm('Tem certeza que deseja excluir o modelo "'+e.name+'"?'))try{await this.store.remove(e.id),this.selectedTemplateId===e.id&&(this.selectedTemplateId=null),(0,o.Te)("Modelo excluído")}catch(e){(0,o.Qg)("Erro ao excluir modelo")}},openFieldModal(e){e?(this.editingField=e,this.fieldForm={name:e.name,label:e.label,fieldType:e.fieldType,placeholder:e.placeholder||"",helpText:e.helpText||"",isRequired:e.isRequired,width:e.width||"full",options:e.options?[...e.options]:[]}):(this.editingField=null,this.fieldForm={name:"",label:"",fieldType:"text",placeholder:"",helpText:"",isRequired:!1,width:"full",options:[]}),this.showFieldModal=!0},closeFieldModal(){this.showFieldModal=!1,this.editingField=null},onLabelInput(){this.editingField||(this.fieldForm.name=this.toSnakeCase(this.fieldForm.label))},toSnakeCase:e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""),addOption(){this.fieldForm.options.push({value:"",label:""})},removeOption(e){this.fieldForm.options.splice(e,1)},async saveField(){if(!this.fieldForm.name.trim()||!this.fieldForm.label.trim())return void(0,o.Qg)("Nome e rótulo são obrigatórios");const e={name:this.fieldForm.name,label:this.fieldForm.label,fieldType:this.fieldForm.fieldType,placeholder:this.fieldForm.placeholder||null,helpText:this.fieldForm.helpText||null,isRequired:this.fieldForm.isRequired,width:this.fieldForm.width};"select"!==this.fieldForm.fieldType&&"radio"!==this.fieldForm.fieldType||(e.options=this.fieldForm.options.filter(e=>""!==e.value.trim()));try{this.editingField?(await this.store.updateField(this.editingField.id,e),(0,o.Te)("Campo atualizado")):(await this.store.createField(this.selectedTemplateId,e),(0,o.Te)("Campo criado")),this.closeFieldModal()}catch(e){(0,o.Qg)(e.response?.data?.error||"Erro ao salvar campo")}},async confirmDeleteField(e){if(confirm('Tem certeza que deseja excluir o campo "'+e.label+'"?'))try{await this.store.removeField(e.id),(0,o.Te)("Campo excluído")}catch(e){(0,o.Qg)("Erro ao excluir campo")}},async onFieldReorder(){const e=this.sortableFields.map(e=>e.id);try{await this.store.reorderFields(this.selectedTemplateId,e)}catch(e){(0,o.Qg)("Erro ao reordenar campos")}},getFieldIcon:e=>({text:"TextBoxOutline",number:"Numeric",date:"CalendarRange",select:"FormatListBulleted",textarea:"TextLong",file:"FileOutline",checkbox:"CheckboxMarkedOutline",radio:"RadioboxMarked",email:"EmailOutline",cpf:"CardAccountDetailsOutline",cnpj:"CardAccountDetailsOutline",phone:"Phone",currency:"CurrencyUsd",user_select:"AccountOutline"}[e]||"TextBoxOutline"),getWidthLabel:e=>({full:"Inteira",half:"Meia",third:"1/3"}[e]||e)}};var _=a(5072),T=a.n(_),B=a(7825),D=a.n(B),E=a(7659),N=a.n(E),q=a(5056),R=a.n(q),I=a(540),z=a.n(I),M=a(1113),O=a.n(M),P=a(4793),$={};$.styleTagTransform=O(),$.setAttributes=R(),$.insert=N().bind(null,"head"),$.domAPI=D(),$.insertStyleElement=z();T()(P.A,$);P.A&&P.A.locals&&P.A.locals;const S=(0,a(4486).A)(k,function(){var e=this,t=e._self._c;return t("div",{staticClass:"tramita-form-editor"},[t("div",{staticClass:"form-editor-layout"},[t("div",{staticClass:"form-editor-sidebar"},[t("div",{staticClass:"sidebar-header"},[t("h3",[e._v("Modelos de Formulário")]),e._v(" "),t("NcButton",{attrs:{type:"primary","aria-label":"Adicionar modelo"},on:{click:function(t){e.showAddTemplate=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Plus",{attrs:{size:20}})]},proxy:!0}])},[e._v("\n\t\t\t\t\tNovo\n\t\t\t\t")])],1),e._v(" "),e.store.loading&&0===e.templates.length?t("NcLoadingIcon"):0===e.templates.length?t("NcEmptyContent",{attrs:{name:"Nenhum modelo",description:"Crie o primeiro modelo de formulário para este tipo de processo."},scopedSlots:e._u([{key:"icon",fn:function(){return[t("TextBoxOutline",{attrs:{size:48}})]},proxy:!0}])}):t("ul",{staticClass:"template-list"},e._l(e.templates,function(a){return t("li",{key:a.id,class:["template-item",{active:e.selectedTemplateId===a.id}],on:{click:function(t){return e.selectTemplate(a)}}},[t("span",{staticClass:"template-name"},[e._v(e._s(a.name))]),e._v(" "),a.isRequired?t("span",{staticClass:"required-badge"},[e._v("Obrigatório")]):e._e(),e._v(" "),t("div",{staticClass:"template-actions"},[t("NcButton",{attrs:{type:"tertiary","aria-label":"Editar modelo"},on:{click:function(t){return t.stopPropagation(),e.editTemplate(a)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Pencil",{attrs:{size:16}})]},proxy:!0}],null,!0)}),e._v(" "),t("NcButton",{attrs:{type:"tertiary","aria-label":"Excluir modelo"},on:{click:function(t){return t.stopPropagation(),e.confirmDeleteTemplate(a)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Delete",{attrs:{size:16}})]},proxy:!0}],null,!0)})],1)])}),0)],1),e._v(" "),t("div",{staticClass:"form-editor-main"},[e.selectedTemplateId?[t("div",{staticClass:"main-header"},[t("h3",[e._v(e._s(e.currentTemplateName))]),e._v(" "),t("NcButton",{attrs:{type:"primary","aria-label":"Adicionar campo"},on:{click:function(t){return e.openFieldModal()}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Plus",{attrs:{size:20}})]},proxy:!0}],null,!1,32235154)},[e._v("\n\t\t\t\t\t\tAdicionar Campo\n\t\t\t\t\t")])],1),e._v(" "),e.store.loading&&0===e.fields.length?t("NcLoadingIcon"):0===e.fields.length?t("NcEmptyContent",{attrs:{name:"Nenhum campo",description:"Adicione campos ao modelo de formulário."},scopedSlots:e._u([{key:"icon",fn:function(){return[t("TextBoxOutline",{attrs:{size:48}})]},proxy:!0}],null,!1,3043200078)}):t("draggable",{attrs:{handle:".drag-handle"},on:{end:e.onFieldReorder},model:{value:e.sortableFields,callback:function(t){e.sortableFields=t},expression:"sortableFields"}},e._l(e.sortableFields,function(a){return t("div",{key:a.id,staticClass:"field-card"},[t("div",{staticClass:"drag-handle"},[t("DragHorizontalVariant",{attrs:{size:20}})],1),e._v(" "),t("div",{staticClass:"field-info"},[t("div",{staticClass:"field-header"},[t(e.getFieldIcon(a.fieldType),{tag:"component",staticClass:"field-type-icon",attrs:{size:18}}),e._v(" "),t("span",{staticClass:"field-type-badge"},[e._v(e._s(a.fieldType))]),e._v(" "),t("span",{staticClass:"field-label"},[e._v(e._s(a.label))]),e._v(" "),a.isRequired?t("span",{staticClass:"required-indicator"},[e._v("*")]):e._e()],1),e._v(" "),t("span",{staticClass:"field-name"},[e._v(e._s(a.name))])]),e._v(" "),t("div",{staticClass:"field-width-badge"},[e._v(e._s(e.getWidthLabel(a.width)))]),e._v(" "),t("div",{staticClass:"field-actions"},[t("NcButton",{attrs:{type:"tertiary","aria-label":"Editar campo"},on:{click:function(t){return e.openFieldModal(a)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Pencil",{attrs:{size:16}})]},proxy:!0}],null,!0)}),e._v(" "),t("NcButton",{attrs:{type:"tertiary","aria-label":"Excluir campo"},on:{click:function(t){return e.confirmDeleteField(a)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Delete",{attrs:{size:16}})]},proxy:!0}],null,!0)})],1)])}),0)]:t("NcEmptyContent",{attrs:{name:"Selecione um modelo",description:"Escolha um modelo de formulário na lista ao lado para editar seus campos."},scopedSlots:e._u([{key:"icon",fn:function(){return[t("TextBoxOutline",{attrs:{size:48}})]},proxy:!0}])})],2)]),e._v(" "),e.showAddTemplate||e.editingTemplate?t("NcModal",{attrs:{name:e.editingTemplate?"Editar Modelo":"Novo Modelo"},on:{close:e.closeTemplateModal}},[t("div",{staticClass:"modal-content"},[t("h3",[e._v(e._s(e.editingTemplate?"Editar Modelo":"Novo Modelo de Formulário"))]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"tpl-name"}},[e._v("Nome *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.templateForm.name,expression:"templateForm.name"}],attrs:{id:"tpl-name",type:"text",placeholder:"Nome do modelo",required:""},domProps:{value:e.templateForm.name},on:{input:function(t){t.target.composing||e.$set(e.templateForm,"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"tpl-description"}},[e._v("Descrição")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.templateForm.description,expression:"templateForm.description"}],attrs:{id:"tpl-description",placeholder:"Descrição do modelo",rows:"3"},domProps:{value:e.templateForm.description},on:{input:function(t){t.target.composing||e.$set(e.templateForm,"description",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.templateForm.isRequired,expression:"templateForm.isRequired"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.templateForm.isRequired)?e._i(e.templateForm.isRequired,null)>-1:e.templateForm.isRequired},on:{change:function(t){var a=e.templateForm.isRequired,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.templateForm,"isRequired",a.concat([null])):i>-1&&e.$set(e.templateForm,"isRequired",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.templateForm,"isRequired",o)}}}),e._v("\n\t\t\t\t\tObrigatório\n\t\t\t\t")])]),e._v(" "),t("div",{staticClass:"modal-actions"},[t("NcButton",{attrs:{type:"tertiary"},on:{click:e.closeTemplateModal}},[e._v("\n\t\t\t\t\tCancelar\n\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"primary"},on:{click:e.saveTemplate}},[e._v("\n\t\t\t\t\t"+e._s(e.editingTemplate?"Salvar":"Criar")+"\n\t\t\t\t")])],1)])]):e._e(),e._v(" "),e.showFieldModal?t("NcModal",{attrs:{name:"Campo",size:"large"},on:{close:e.closeFieldModal}},[t("div",{staticClass:"modal-content"},[t("h3",[e._v(e._s(e.editingField?"Editar Campo":"Novo Campo"))]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group form-group--half"},[t("label",{attrs:{for:"field-label"}},[e._v("Rótulo *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldForm.label,expression:"fieldForm.label"}],attrs:{id:"field-label",type:"text",placeholder:"Rótulo do campo",required:""},domProps:{value:e.fieldForm.label},on:{input:[function(t){t.target.composing||e.$set(e.fieldForm,"label",t.target.value)},e.onLabelInput]}})]),e._v(" "),t("div",{staticClass:"form-group form-group--half"},[t("label",{attrs:{for:"field-name"}},[e._v("Nome (identificador) *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldForm.name,expression:"fieldForm.name"}],staticClass:"monospace",attrs:{id:"field-name",type:"text",placeholder:"nome_do_campo",required:""},domProps:{value:e.fieldForm.name},on:{input:function(t){t.target.composing||e.$set(e.fieldForm,"name",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group form-group--half"},[t("label",{attrs:{for:"field-type"}},[e._v("Tipo *")]),e._v(" "),t("NcSelect",{attrs:{options:e.fieldTypeOptions,label:"label",reduce:e=>e.value,clearable:!1,"input-id":"field-type",placeholder:"Selecione o tipo..."},model:{value:e.fieldForm.fieldType,callback:function(t){e.$set(e.fieldForm,"fieldType",t)},expression:"fieldForm.fieldType"}})],1),e._v(" "),t("div",{staticClass:"form-group form-group--half"},[t("label",{attrs:{for:"field-width"}},[e._v("Largura")]),e._v(" "),t("NcSelect",{attrs:{options:e.widthOptions,label:"label",reduce:e=>e.value,clearable:!1,"input-id":"field-width"},model:{value:e.fieldForm.width,callback:function(t){e.$set(e.fieldForm,"width",t)},expression:"fieldForm.width"}})],1)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"field-placeholder"}},[e._v("Placeholder")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldForm.placeholder,expression:"fieldForm.placeholder"}],attrs:{id:"field-placeholder",type:"text",placeholder:"Texto de exemplo"},domProps:{value:e.fieldForm.placeholder},on:{input:function(t){t.target.composing||e.$set(e.fieldForm,"placeholder",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"field-help"}},[e._v("Texto de ajuda")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldForm.helpText,expression:"fieldForm.helpText"}],attrs:{id:"field-help",type:"text",placeholder:"Texto de ajuda exibido abaixo do campo"},domProps:{value:e.fieldForm.helpText},on:{input:function(t){t.target.composing||e.$set(e.fieldForm,"helpText",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldForm.isRequired,expression:"fieldForm.isRequired"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.fieldForm.isRequired)?e._i(e.fieldForm.isRequired,null)>-1:e.fieldForm.isRequired},on:{change:function(t){var a=e.fieldForm.isRequired,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.fieldForm,"isRequired",a.concat([null])):i>-1&&e.$set(e.fieldForm,"isRequired",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.fieldForm,"isRequired",o)}}}),e._v("\n\t\t\t\t\tObrigatório\n\t\t\t\t")])]),e._v(" "),"select"===e.fieldForm.fieldType||"radio"===e.fieldForm.fieldType?t("div",{staticClass:"options-editor"},[t("label",[e._v("Opções")]),e._v(" "),e._l(e.fieldForm.options,function(a,r){return t("div",{key:r,staticClass:"option-row"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"opt.value"}],staticClass:"option-input",attrs:{type:"text",placeholder:"Valor"},domProps:{value:a.value},on:{input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.label,expression:"opt.label"}],staticClass:"option-input",attrs:{type:"text",placeholder:"Rótulo"},domProps:{value:a.label},on:{input:function(t){t.target.composing||e.$set(a,"label",t.target.value)}}}),e._v(" "),t("NcButton",{attrs:{type:"tertiary","aria-label":"Remover opção"},on:{click:function(t){return e.removeOption(r)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Delete",{attrs:{size:16}})]},proxy:!0}],null,!0)})],1)}),e._v(" "),t("NcButton",{attrs:{type:"secondary"},on:{click:e.addOption},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Plus",{attrs:{size:16}})]},proxy:!0}],null,!1,1065440311)},[e._v("\n\t\t\t\t\tAdicionar opção\n\t\t\t\t")])],2):e._e(),e._v(" "),t("div",{staticClass:"modal-actions"},[t("NcButton",{attrs:{type:"tertiary"},on:{click:e.closeFieldModal}},[e._v("\n\t\t\t\t\tCancelar\n\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"primary"},on:{click:e.saveField}},[e._v("\n\t\t\t\t\t"+e._s(e.editingField?"Salvar":"Criar")+"\n\t\t\t\t")])],1)])]):e._e()],1)},[],!1,null,"dc02d33a",null).exports}}]);
//# sourceMappingURL=tramita-src_views_FormTemplateEditor_vue.js.map?v=37038587af8ca2a1721a