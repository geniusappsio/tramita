{"version":3,"file":"tramita-src_views_StageManager_vue.js?v=1904fb83e7b15e4767e2","mappings":"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","sources":["webpack:///tramita/src/services/api.js","webpack:///tramita/src/services/processTypeApi.js","webpack:///tramita/src/store/processType.js","webpack:///tramita/src/views/StageManager.vue?vue&type=style&index=0&id=602b77f6&prod&scoped=true&lang=scss","webpack:///tramita/node_modules/vue-material-design-icons/DragHorizontalVariant.vue","webpack:///tramita/node_modules/vue-material-design-icons/DragHorizontalVariant.vue?vue&type=script&lang=js","webpack://tramita/./node_modules/vue-material-design-icons/DragHorizontalVariant.vue?21cc","webpack:///tramita/node_modules/vue-material-design-icons/DragHorizontalVariant.vue?vue&type=template&id=2a9a8106","webpack://tramita/./src/views/StageManager.vue?4cce","webpack:///tramita/src/services/stageApi.js","webpack:///tramita/src/store/stage.js","webpack:///tramita/src/views/StageManager.vue","webpack:///tramita/src/views/StageManager.vue?vue&type=script&lang=js","webpack://tramita/./src/views/StageManager.vue?4bae","webpack://tramita/./src/views/StageManager.vue?3e25"],"sourcesContent":["import axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nconst baseUrl = generateUrl('/apps/tramita/api/v1')\n\nexport const api = axios.create({\n\tbaseURL: baseUrl,\n})\n\n// Interceptor to handle 402 (license required)\napi.interceptors.response.use(\n\tresponse => response,\n\terror => {\n\t\tif (error.response?.status === 402) {\n\t\t\twindow.dispatchEvent(new CustomEvent('tramita:license-required'))\n\t\t}\n\t\treturn Promise.reject(error)\n\t},\n)\n","import { api } from './api.js'\n\nexport const processTypeApi = {\n\tasync getAll() {\n\t\tconst response = await api.get('/process-types')\n\t\tconst data = response.data\n\t\treturn Array.isArray(data) ? data : (data?.data ?? [])\n\t},\n\n\tasync getById(id) {\n\t\tconst response = await api.get(`/process-types/${id}`)\n\t\treturn response.data\n\t},\n\n\tasync create(data) {\n\t\tconst response = await api.post('/process-types', data)\n\t\treturn response.data\n\t},\n\n\tasync update(id, data) {\n\t\tconst response = await api.put(`/process-types/${id}`, data)\n\t\treturn response.data\n\t},\n\n\tasync delete(id) {\n\t\tconst response = await api.delete(`/process-types/${id}`)\n\t\treturn response.data\n\t},\n\n\tasync restore(id) {\n\t\tconst response = await api.put(`/process-types/${id}/restore`)\n\t\treturn response.data\n\t},\n}\n","import { defineStore } from 'pinia'\nimport { processTypeApi } from '../services/processTypeApi.js'\n\nexport const useProcessTypeStore = defineStore('processType', {\n\tstate: () => ({\n\t\tprocessTypes: [],\n\t\tcurrentProcessType: null,\n\t\tloading: false,\n\t\terror: null,\n\t}),\n\n\tgetters: {\n\t\tactiveProcessTypes: (state) => state.processTypes.filter(pt => pt.isActive),\n\t\tgetById: (state) => (id) => state.processTypes.find(pt => pt.id === id),\n\t},\n\n\tactions: {\n\t\tasync fetchAll() {\n\t\t\tthis.loading = true\n\t\t\tthis.error = null\n\t\t\ttry {\n\t\t\t\tthis.processTypes = await processTypeApi.getAll()\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao carregar tipos de processo'\n\t\t\t\tthrow error\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync fetchById(id) {\n\t\t\tthis.loading = true\n\t\t\tthis.error = null\n\t\t\ttry {\n\t\t\t\tthis.currentProcessType = await processTypeApi.getById(id)\n\t\t\t\treturn this.currentProcessType\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao carregar tipo de processo'\n\t\t\t\tthrow error\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync create(data) {\n\t\t\ttry {\n\t\t\t\tconst created = await processTypeApi.create(data)\n\t\t\t\tthis.processTypes.push(created)\n\t\t\t\treturn created\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao criar tipo de processo'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync update(id, data) {\n\t\t\ttry {\n\t\t\t\tconst updated = await processTypeApi.update(id, data)\n\t\t\t\tconst index = this.processTypes.findIndex(pt => pt.id === id)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.processTypes[index] = updated\n\t\t\t\t}\n\t\t\t\tif (this.currentProcessType?.id === id) {\n\t\t\t\t\tthis.currentProcessType = updated\n\t\t\t\t}\n\t\t\t\treturn updated\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao atualizar tipo de processo'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync remove(id) {\n\t\t\ttry {\n\t\t\t\tawait processTypeApi.delete(id)\n\t\t\t\tthis.processTypes = this.processTypes.filter(pt => pt.id !== id)\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao excluir tipo de processo'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync restore(id) {\n\t\t\ttry {\n\t\t\t\tconst restored = await processTypeApi.restore(id)\n\t\t\t\tthis.processTypes.push(restored)\n\t\t\t\treturn restored\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao restaurar tipo de processo'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\t},\n})\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.stage-manager[data-v-602b77f6]{display:flex;flex-direction:column;height:100%;padding:20px;max-width:900px}.stage-manager .empty-content[data-v-602b77f6]{flex:1}.stage-manager__header[data-v-602b77f6]{flex-shrink:0;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.stage-manager__header h2[data-v-602b77f6]{margin:0}.stage-item[data-v-602b77f6]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:var(--border-radius-large);background:var(--color-background-dark);transition:background .2s;margin-bottom:8px}.stage-item[data-v-602b77f6]:hover{background:var(--color-background-hover)}.stage-item__color[data-v-602b77f6]{width:12px;height:12px;border-radius:50%;flex-shrink:0}.stage-item__info[data-v-602b77f6]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.stage-item__name[data-v-602b77f6]{font-weight:bold;font-size:14px}.stage-item__badges[data-v-602b77f6]{display:flex;gap:6px;flex-wrap:wrap}.stage-item__desc[data-v-602b77f6]{font-size:13px;color:var(--color-text-maxcontrast);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.stage-item__actions[data-v-602b77f6]{display:flex;gap:4px;flex-shrink:0}.drag-handle[data-v-602b77f6]{cursor:grab;display:flex;align-items:center;color:var(--color-text-maxcontrast);flex-shrink:0}.drag-handle[data-v-602b77f6]:active{cursor:grabbing}.stage-badge[data-v-602b77f6]{font-size:11px;padding:2px 8px;border-radius:var(--border-radius-pill);font-weight:600}.stage-badge--initial[data-v-602b77f6]{background:var(--color-primary-element);color:var(--color-primary-element-text)}.stage-badge--final[data-v-602b77f6]{background:var(--color-success);color:#fff}.stage-badge--sla[data-v-602b77f6]{background:var(--color-warning);color:#fff}.stage-modal[data-v-602b77f6]{padding:20px;min-width:400px}.stage-modal h2[data-v-602b77f6]{margin-top:0;margin-bottom:16px}.form-group[data-v-602b77f6]{margin-bottom:12px}.form-group label[data-v-602b77f6]{display:block;font-weight:600;margin-bottom:4px;font-size:14px}.form-group input[type=text][data-v-602b77f6],.form-group input[type=number][data-v-602b77f6],.form-group textarea[data-v-602b77f6]{width:100%;padding:8px 10px;border:1px solid var(--color-border-dark);border-radius:var(--border-radius);font-size:14px;background:var(--color-main-background);color:var(--color-main-text)}.form-group input[type=text][data-v-602b77f6]:focus,.form-group input[type=number][data-v-602b77f6]:focus,.form-group textarea[data-v-602b77f6]:focus{border-color:var(--color-primary-element);outline:none}.form-group--half[data-v-602b77f6]{flex:1}.form-row[data-v-602b77f6]{display:flex;gap:12px}.color-input[data-v-602b77f6]{height:36px;padding:2px;cursor:pointer}.checkbox-label[data-v-602b77f6]{display:flex !important;align-items:center;gap:8px;cursor:pointer;font-weight:400 !important}.checkbox-label input[type=checkbox][data-v-602b77f6]{width:auto;margin:0}.form-actions[data-v-602b77f6]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid var(--color-border)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/StageManager.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,YAAA,CACA,qBAAA,CACA,WAAA,CACA,YAAA,CACA,eAAA,CAEA,+CACC,MAAA,CAGD,wCACC,aAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CAEA,2CACC,QAAA,CAKH,6BACC,YAAA,CACA,kBAAA,CACA,QAAA,CACA,iBAAA,CACA,wCAAA,CACA,uCAAA,CACA,yBAAA,CACA,iBAAA,CAEA,mCACC,wCAAA,CAGD,oCACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,aAAA,CAGD,mCACC,MAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CACA,WAAA,CAGD,mCACC,gBAAA,CACA,cAAA,CAGD,qCACC,YAAA,CACA,OAAA,CACA,cAAA,CAGD,mCACC,cAAA,CACA,mCAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAGD,sCACC,YAAA,CACA,OAAA,CACA,aAAA,CAIF,8BACC,WAAA,CACA,YAAA,CACA,kBAAA,CACA,mCAAA,CACA,aAAA,CAEA,qCACC,eAAA,CAIF,8BACC,cAAA,CACA,eAAA,CACA,uCAAA,CACA,eAAA,CAEA,uCACC,uCAAA,CACA,uCAAA,CAGD,qCACC,+BAAA,CACA,UAAA,CAGD,mCACC,+BAAA,CACA,UAAA,CAIF,8BACC,YAAA,CACA,eAAA,CAEA,iCACC,YAAA,CACA,kBAAA,CAIF,6BACC,kBAAA,CAEA,mCACC,aAAA,CACA,eAAA,CACA,iBAAA,CACA,cAAA,CAGD,oIAGC,UAAA,CACA,gBAAA,CACA,yCAAA,CACA,kCAAA,CACA,cAAA,CACA,uCAAA,CACA,4BAAA,CAEA,sJACC,yCAAA,CACA,YAAA,CAIF,mCACC,MAAA,CAIF,2BACC,YAAA,CACA,QAAA,CAGD,8BACC,WAAA,CACA,WAAA,CACA,cAAA,CAGD,iCACC,uBAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,0BAAA,CAEA,sDACC,UAAA,CACA,QAAA,CAIF,+BACC,YAAA,CACA,wBAAA,CACA,OAAA,CACA,eAAA,CACA,gBAAA,CACA,wCAAA\",\"sourcesContent\":[\"\\n.stage-manager {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tpadding: 20px;\\n\\tmax-width: 900px;\\n\\n\\t.empty-content {\\n\\t\\tflex: 1;\\n\\t}\\n\\n\\t&__header {\\n\\t\\tflex-shrink: 0;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: center;\\n\\t\\tmargin-bottom: 20px;\\n\\n\\t\\th2 {\\n\\t\\t\\tmargin: 0;\\n\\t\\t}\\n\\t}\\n}\\n\\n.stage-item {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tgap: 12px;\\n\\tpadding: 12px 16px;\\n\\tborder-radius: var(--border-radius-large);\\n\\tbackground: var(--color-background-dark);\\n\\ttransition: background 0.2s;\\n\\tmargin-bottom: 8px;\\n\\n\\t&:hover {\\n\\t\\tbackground: var(--color-background-hover);\\n\\t}\\n\\n\\t&__color {\\n\\t\\twidth: 12px;\\n\\t\\theight: 12px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n\\n\\t&__info {\\n\\t\\tflex: 1;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tgap: 4px;\\n\\t\\tmin-width: 0;\\n\\t}\\n\\n\\t&__name {\\n\\t\\tfont-weight: bold;\\n\\t\\tfont-size: 14px;\\n\\t}\\n\\n\\t&__badges {\\n\\t\\tdisplay: flex;\\n\\t\\tgap: 6px;\\n\\t\\tflex-wrap: wrap;\\n\\t}\\n\\n\\t&__desc {\\n\\t\\tfont-size: 13px;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t}\\n\\n\\t&__actions {\\n\\t\\tdisplay: flex;\\n\\t\\tgap: 4px;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n}\\n\\n.drag-handle {\\n\\tcursor: grab;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\tflex-shrink: 0;\\n\\n\\t&:active {\\n\\t\\tcursor: grabbing;\\n\\t}\\n}\\n\\n.stage-badge {\\n\\tfont-size: 11px;\\n\\tpadding: 2px 8px;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tfont-weight: 600;\\n\\n\\t&--initial {\\n\\t\\tbackground: var(--color-primary-element);\\n\\t\\tcolor: var(--color-primary-element-text);\\n\\t}\\n\\n\\t&--final {\\n\\t\\tbackground: var(--color-success);\\n\\t\\tcolor: white;\\n\\t}\\n\\n\\t&--sla {\\n\\t\\tbackground: var(--color-warning);\\n\\t\\tcolor: white;\\n\\t}\\n}\\n\\n.stage-modal {\\n\\tpadding: 20px;\\n\\tmin-width: 400px;\\n\\n\\th2 {\\n\\t\\tmargin-top: 0;\\n\\t\\tmargin-bottom: 16px;\\n\\t}\\n}\\n\\n.form-group {\\n\\tmargin-bottom: 12px;\\n\\n\\tlabel {\\n\\t\\tdisplay: block;\\n\\t\\tfont-weight: 600;\\n\\t\\tmargin-bottom: 4px;\\n\\t\\tfont-size: 14px;\\n\\t}\\n\\n\\tinput[type=\\\"text\\\"],\\n\\tinput[type=\\\"number\\\"],\\n\\ttextarea {\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 8px 10px;\\n\\t\\tborder: 1px solid var(--color-border-dark);\\n\\t\\tborder-radius: var(--border-radius);\\n\\t\\tfont-size: 14px;\\n\\t\\tbackground: var(--color-main-background);\\n\\t\\tcolor: var(--color-main-text);\\n\\n\\t\\t&:focus {\\n\\t\\t\\tborder-color: var(--color-primary-element);\\n\\t\\t\\toutline: none;\\n\\t\\t}\\n\\t}\\n\\n\\t&--half {\\n\\t\\tflex: 1;\\n\\t}\\n}\\n\\n.form-row {\\n\\tdisplay: flex;\\n\\tgap: 12px;\\n}\\n\\n.color-input {\\n\\theight: 36px;\\n\\tpadding: 2px;\\n\\tcursor: pointer;\\n}\\n\\n.checkbox-label {\\n\\tdisplay: flex !important;\\n\\talign-items: center;\\n\\tgap: 8px;\\n\\tcursor: pointer;\\n\\tfont-weight: 400 !important;\\n\\n\\tinput[type=\\\"checkbox\\\"] {\\n\\t\\twidth: auto;\\n\\t\\tmargin: 0;\\n\\t}\\n}\\n\\n.form-actions {\\n\\tdisplay: flex;\\n\\tjustify-content: flex-end;\\n\\tgap: 8px;\\n\\tmargin-top: 16px;\\n\\tpadding-top: 16px;\\n\\tborder-top: 1px solid var(--color-border);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon drag-horizontal-variant-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M21 11H3V9H21V11M21 13H3V15H21V13Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"DragHorizontalVariantIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","import mod from \"-!../vue-loader/lib/index.js??vue-loader-options!./DragHorizontalVariant.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../vue-loader/lib/index.js??vue-loader-options!./DragHorizontalVariant.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DragHorizontalVariant.vue?vue&type=template&id=2a9a8106\"\nimport script from \"./DragHorizontalVariant.vue?vue&type=script&lang=js\"\nexport * from \"./DragHorizontalVariant.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',_vm._b({staticClass:\"material-design-icon drag-horizontal-variant-icon\",attrs:{\"aria-hidden\":_vm.title ? null : 'true',\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},'span',_vm.$attrs,false),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M21 11H3V9H21V11M21 13H3V15H21V13Z\"}},[(_vm.title)?_c('title',[_vm._v(_vm._s(_vm.title))]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stage-manager\"},[_c('div',{staticClass:\"stage-manager__header\"},[_c('h2',[_vm._v(_vm._s(_vm.processTypeName)+\" - Etapas\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openCreateModal},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Plus',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\tNova Etapa\\n\\t\\t\")])],1),_vm._v(\" \"),(_vm.stageStore.loading)?_c('NcLoadingIcon',{attrs:{\"size\":44}}):(_vm.stages.length === 0)?_c('NcEmptyContent',{attrs:{\"name\":\"Nenhuma etapa cadastrada\",\"description\":\"Crie a primeira etapa do fluxo de trabalho para este tipo de processo.\"}}):_c('draggable',{attrs:{\"handle\":\".drag-handle\"},on:{\"end\":_vm.onDragEnd},model:{value:(_vm.orderedStages),callback:function ($$v) {_vm.orderedStages=$$v},expression:\"orderedStages\"}},_vm._l((_vm.orderedStages),function(stage){return _c('div',{key:stage.id,staticClass:\"stage-item\"},[_c('div',{staticClass:\"drag-handle\"},[_c('DragHorizontalVariant',{attrs:{\"size\":20}})],1),_vm._v(\" \"),_c('div',{staticClass:\"stage-item__color\",style:({ backgroundColor: stage.color || '#808080' })}),_vm._v(\" \"),_c('div',{staticClass:\"stage-item__info\"},[_c('span',{staticClass:\"stage-item__name\"},[_vm._v(_vm._s(stage.name))]),_vm._v(\" \"),_c('div',{staticClass:\"stage-item__badges\"},[(stage.isInitial)?_c('span',{staticClass:\"stage-badge stage-badge--initial\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tInicial\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(stage.isFinal)?_c('span',{staticClass:\"stage-badge stage-badge--final\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tFinal\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(stage.slaHours)?_c('span',{staticClass:\"stage-badge stage-badge--sla\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tSLA: \"+_vm._s(stage.slaHours)+\"h\\n\\t\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(stage.description)?_c('span',{staticClass:\"stage-item__desc\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(stage.description)+\"\\n\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"stage-item__actions\"},[_c('NcButton',{attrs:{\"type\":\"tertiary\"},on:{\"click\":function($event){return _vm.openEditModal(stage)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Pencil',{attrs:{\"size\":20}})]},proxy:true}],null,true)}),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"tertiary\"},on:{\"click\":function($event){return _vm.confirmDelete(stage)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete',{attrs:{\"size\":20}})]},proxy:true}],null,true)})],1)])}),0),_vm._v(\" \"),(_vm.showModal)?_c('NcModal',{on:{\"close\":_vm.closeModal}},[_c('div',{staticClass:\"stage-modal\"},[_c('h2',[_vm._v(_vm._s(_vm.editingId ? 'Editar' : 'Nova')+\" Etapa\")]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.saveStage.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"stage-name\"}},[_vm._v(\"Nome *\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],attrs:{\"id\":\"stage-name\",\"type\":\"text\",\"required\":\"\",\"placeholder\":\"Ex: Analise Inicial\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"name\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"stage-description\"}},[_vm._v(\"Descricao\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.description),expression:\"form.description\"}],attrs:{\"id\":\"stage-description\",\"placeholder\":\"Descricao da etapa\",\"rows\":\"3\"},domProps:{\"value\":(_vm.form.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"description\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group form-group--half\"},[_c('label',{attrs:{\"for\":\"stage-color\"}},[_vm._v(\"Cor\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.color),expression:\"form.color\"}],staticClass:\"color-input\",attrs:{\"id\":\"stage-color\",\"type\":\"color\"},domProps:{\"value\":(_vm.form.color)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"color\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group form-group--half\"},[_c('label',{attrs:{\"for\":\"stage-sla\"}},[_vm._v(\"SLA (horas)\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.slaHours),expression:\"form.slaHours\",modifiers:{\"number\":true}}],attrs:{\"id\":\"stage-sla\",\"type\":\"number\",\"min\":\"0\",\"placeholder\":\"Ex: 48\"},domProps:{\"value\":(_vm.form.slaHours)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"slaHours\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group form-group--half\"},[_c('label',{staticClass:\"checkbox-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.isInitial),expression:\"form.isInitial\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.form.isInitial)?_vm._i(_vm.form.isInitial,null)>-1:(_vm.form.isInitial)},on:{\"change\":function($event){var $$a=_vm.form.isInitial,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.form, \"isInitial\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.form, \"isInitial\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.form, \"isInitial\", $$c)}}}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\tEtapa Inicial\\n\\t\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group form-group--half\"},[_c('label',{staticClass:\"checkbox-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.isFinal),expression:\"form.isFinal\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.form.isFinal)?_vm._i(_vm.form.isFinal,null)>-1:(_vm.form.isFinal)},on:{\"change\":function($event){var $$a=_vm.form.isFinal,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.form, \"isFinal\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.form, \"isFinal\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.form, \"isFinal\", $$c)}}}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\tEtapa Final\\n\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-actions\"},[_c('NcButton',{attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tCancelar\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\",\"disabled\":_vm.saving}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.saving ? 'Salvando...' : 'Salvar')+\"\\n\\t\\t\\t\\t\\t\")])],1)])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { api } from './api.js'\n\nexport const stageApi = {\n\tasync getByProcessType(procTypeId) {\n\t\tconst response = await api.get(`/process-types/${procTypeId}/stages`)\n\t\treturn response.data\n\t},\n\tasync getById(id) {\n\t\tconst response = await api.get(`/stages/${id}`)\n\t\treturn response.data\n\t},\n\tasync create(procTypeId, data) {\n\t\tconst response = await api.post(`/process-types/${procTypeId}/stages`, data)\n\t\treturn response.data\n\t},\n\tasync update(id, data) {\n\t\tconst response = await api.put(`/stages/${id}`, data)\n\t\treturn response.data\n\t},\n\tasync delete(id) {\n\t\tconst response = await api.delete(`/stages/${id}`)\n\t\treturn response.data\n\t},\n\tasync reorder(procTypeId, stageIds) {\n\t\tconst response = await api.put(`/process-types/${procTypeId}/stages/reorder`, { stageIds })\n\t\treturn response.data\n\t},\n}\n","import { defineStore } from 'pinia'\nimport { stageApi } from '../services/stageApi.js'\n\nexport const useStageStore = defineStore('stage', {\n\tstate: () => ({\n\t\tstages: [],\n\t\tloading: false,\n\t\terror: null,\n\t}),\n\n\tgetters: {\n\t\tgetByProcessType: (state) => (procTypeId) =>\n\t\t\tstate.stages.filter(s => s.procTypeId === procTypeId),\n\t\tgetById: (state) => (id) =>\n\t\t\tstate.stages.find(s => s.id === id),\n\t},\n\n\tactions: {\n\t\tasync fetchByProcessType(procTypeId) {\n\t\t\tthis.loading = true\n\t\t\tthis.error = null\n\t\t\ttry {\n\t\t\t\tconst stages = await stageApi.getByProcessType(procTypeId)\n\t\t\t\t// Replace stages for this process type while keeping others\n\t\t\t\tthis.stages = [\n\t\t\t\t\t...this.stages.filter(s => s.procTypeId !== procTypeId),\n\t\t\t\t\t...stages,\n\t\t\t\t]\n\t\t\t\treturn stages\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao carregar etapas'\n\t\t\t\tthrow error\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync create(procTypeId, data) {\n\t\t\ttry {\n\t\t\t\tconst created = await stageApi.create(procTypeId, data)\n\t\t\t\tthis.stages.push(created)\n\t\t\t\treturn created\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao criar etapa'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync update(id, data) {\n\t\t\ttry {\n\t\t\t\tconst updated = await stageApi.update(id, data)\n\t\t\t\tconst index = this.stages.findIndex(s => s.id === id)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.stages[index] = updated\n\t\t\t\t}\n\t\t\t\treturn updated\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao atualizar etapa'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync remove(id) {\n\t\t\ttry {\n\t\t\t\tawait stageApi.delete(id)\n\t\t\t\tthis.stages = this.stages.filter(s => s.id !== id)\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao excluir etapa'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\tasync reorder(procTypeId, stageIds) {\n\t\t\ttry {\n\t\t\t\tawait stageApi.reorder(procTypeId, stageIds)\n\t\t\t\t// Update local sort order to match the new order\n\t\t\t\tstageIds.forEach((stageId, index) => {\n\t\t\t\t\tconst stage = this.stages.find(s => s.id === stageId)\n\t\t\t\t\tif (stage) {\n\t\t\t\t\t\tstage.sortOrder = index\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = error.response?.data?.error || 'Erro ao reordenar etapas'\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\t},\n})\n","<template>\n\t<div class=\"stage-manager\">\n\t\t<!-- Header -->\n\t\t<div class=\"stage-manager__header\">\n\t\t\t<h2>{{ processTypeName }} - Etapas</h2>\n\t\t\t<NcButton type=\"primary\" @click=\"openCreateModal\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Plus :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\tNova Etapa\n\t\t\t</NcButton>\n\t\t</div>\n\n\t\t<!-- Loading -->\n\t\t<NcLoadingIcon v-if=\"stageStore.loading\" :size=\"44\" />\n\n\t\t<!-- Empty state -->\n\t\t<NcEmptyContent v-else-if=\"stages.length === 0\"\n\t\t\tname=\"Nenhuma etapa cadastrada\"\n\t\t\tdescription=\"Crie a primeira etapa do fluxo de trabalho para este tipo de processo.\" />\n\n\t\t<!-- Draggable list -->\n\t\t<draggable v-else\n\t\t\tv-model=\"orderedStages\"\n\t\t\thandle=\".drag-handle\"\n\t\t\t@end=\"onDragEnd\">\n\t\t\t<div v-for=\"stage in orderedStages\" :key=\"stage.id\" class=\"stage-item\">\n\t\t\t\t<div class=\"drag-handle\">\n\t\t\t\t\t<DragHorizontalVariant :size=\"20\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stage-item__color\"\n\t\t\t\t\t:style=\"{ backgroundColor: stage.color || '#808080' }\" />\n\t\t\t\t<div class=\"stage-item__info\">\n\t\t\t\t\t<span class=\"stage-item__name\">{{ stage.name }}</span>\n\t\t\t\t\t<div class=\"stage-item__badges\">\n\t\t\t\t\t\t<span v-if=\"stage.isInitial\" class=\"stage-badge stage-badge--initial\">\n\t\t\t\t\t\t\tInicial\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"stage.isFinal\" class=\"stage-badge stage-badge--final\">\n\t\t\t\t\t\t\tFinal\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"stage.slaHours\" class=\"stage-badge stage-badge--sla\">\n\t\t\t\t\t\t\tSLA: {{ stage.slaHours }}h\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span v-if=\"stage.description\" class=\"stage-item__desc\">\n\t\t\t\t\t\t{{ stage.description }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stage-item__actions\">\n\t\t\t\t\t<NcButton type=\"tertiary\" @click=\"openEditModal(stage)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Pencil :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton type=\"tertiary\" @click=\"confirmDelete(stage)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Delete :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</draggable>\n\n\t\t<!-- Create/Edit Modal -->\n\t\t<NcModal v-if=\"showModal\" @close=\"closeModal\">\n\t\t\t<div class=\"stage-modal\">\n\t\t\t\t<h2>{{ editingId ? 'Editar' : 'Nova' }} Etapa</h2>\n\t\t\t\t<form @submit.prevent=\"saveStage\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"stage-name\">Nome *</label>\n\t\t\t\t\t\t<input id=\"stage-name\"\n\t\t\t\t\t\t\tv-model=\"form.name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tplaceholder=\"Ex: Analise Inicial\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"stage-description\">Descricao</label>\n\t\t\t\t\t\t<textarea id=\"stage-description\"\n\t\t\t\t\t\t\tv-model=\"form.description\"\n\t\t\t\t\t\t\tplaceholder=\"Descricao da etapa\"\n\t\t\t\t\t\t\trows=\"3\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<div class=\"form-group form-group--half\">\n\t\t\t\t\t\t\t<label for=\"stage-color\">Cor</label>\n\t\t\t\t\t\t\t<input id=\"stage-color\"\n\t\t\t\t\t\t\t\tv-model=\"form.color\"\n\t\t\t\t\t\t\t\ttype=\"color\"\n\t\t\t\t\t\t\t\tclass=\"color-input\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group form-group--half\">\n\t\t\t\t\t\t\t<label for=\"stage-sla\">SLA (horas)</label>\n\t\t\t\t\t\t\t<input id=\"stage-sla\"\n\t\t\t\t\t\t\t\tv-model.number=\"form.slaHours\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tplaceholder=\"Ex: 48\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<div class=\"form-group form-group--half\">\n\t\t\t\t\t\t\t<label class=\"checkbox-label\">\n\t\t\t\t\t\t\t\t<input v-model=\"form.isInitial\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\">\n\t\t\t\t\t\t\t\tEtapa Inicial\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group form-group--half\">\n\t\t\t\t\t\t\t<label class=\"checkbox-label\">\n\t\t\t\t\t\t\t\t<input v-model=\"form.isFinal\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\">\n\t\t\t\t\t\t\t\tEtapa Final\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t\t<NcButton type=\"tertiary\" @click=\"closeModal\">\n\t\t\t\t\t\t\tCancelar\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton type=\"primary\"\n\t\t\t\t\t\t\tnative-type=\"submit\"\n\t\t\t\t\t\t\t:disabled=\"saving\">\n\t\t\t\t\t\t\t{{ saving ? 'Salvando...' : 'Salvar' }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</NcModal>\n\t</div>\n</template>\n\n<script>\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcModal from '@nextcloud/vue/dist/Components/NcModal.js'\nimport NcEmptyContent from '@nextcloud/vue/dist/Components/NcEmptyContent.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport Plus from 'vue-material-design-icons/Plus.vue'\nimport Pencil from 'vue-material-design-icons/Pencil.vue'\nimport Delete from 'vue-material-design-icons/Delete.vue'\nimport DragHorizontalVariant from 'vue-material-design-icons/DragHorizontalVariant.vue'\nimport draggable from 'vuedraggable'\nimport { showSuccess, showError } from '@nextcloud/dialogs'\nimport { useStageStore } from '../store/stage.js'\nimport { useProcessTypeStore } from '../store/processType.js'\n\nexport default {\n\tname: 'StageManager',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcModal,\n\t\tNcEmptyContent,\n\t\tNcLoadingIcon,\n\t\tPlus,\n\t\tPencil,\n\t\tDelete,\n\t\tDragHorizontalVariant,\n\t\tdraggable,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tstageStore: useStageStore(),\n\t\t\tprocessTypeStore: useProcessTypeStore(),\n\t\t\tshowModal: false,\n\t\t\teditingId: null,\n\t\t\tsaving: false,\n\t\t\tlocalOrder: [],\n\t\t\tform: {\n\t\t\t\tname: '',\n\t\t\t\tdescription: '',\n\t\t\t\tcolor: '#0082c9',\n\t\t\t\tisInitial: false,\n\t\t\t\tisFinal: false,\n\t\t\t\tslaHours: null,\n\t\t\t},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tprocessTypeId() {\n\t\t\treturn parseInt(this.$route.params.id, 10)\n\t\t},\n\n\t\tprocessTypeName() {\n\t\t\tconst pt = this.processTypeStore.getById(this.processTypeId)\n\t\t\treturn pt ? pt.name : 'Tipo de Processo'\n\t\t},\n\n\t\tstages() {\n\t\t\treturn this.stageStore.getByProcessType(this.processTypeId)\n\t\t},\n\n\t\torderedStages: {\n\t\t\tget() {\n\t\t\t\tif (this.localOrder.length > 0) {\n\t\t\t\t\treturn this.localOrder\n\t\t\t\t}\n\t\t\t\treturn [...this.stages].sort((a, b) => a.sortOrder - b.sortOrder)\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.localOrder = value\n\t\t\t},\n\t\t},\n\t},\n\n\twatch: {\n\t\tstages() {\n\t\t\t// Reset local order when stages change from store\n\t\t\tthis.localOrder = []\n\t\t},\n\t},\n\n\tcreated() {\n\t\tthis.stageStore.fetchByProcessType(this.processTypeId)\n\t\t// Ensure process type data is loaded for the header\n\t\tif (!this.processTypeStore.getById(this.processTypeId)) {\n\t\t\tthis.processTypeStore.fetchById(this.processTypeId)\n\t\t}\n\t},\n\n\tmethods: {\n\t\topenCreateModal() {\n\t\t\tthis.editingId = null\n\t\t\tthis.form = {\n\t\t\t\tname: '',\n\t\t\t\tdescription: '',\n\t\t\t\tcolor: '#0082c9',\n\t\t\t\tisInitial: false,\n\t\t\t\tisFinal: false,\n\t\t\t\tslaHours: null,\n\t\t\t}\n\t\t\tthis.showModal = true\n\t\t},\n\n\t\topenEditModal(stage) {\n\t\t\tthis.editingId = stage.id\n\t\t\tthis.form = {\n\t\t\t\tname: stage.name,\n\t\t\t\tdescription: stage.description || '',\n\t\t\t\tcolor: stage.color || '#0082c9',\n\t\t\t\tisInitial: stage.isInitial,\n\t\t\t\tisFinal: stage.isFinal,\n\t\t\t\tslaHours: stage.slaHours,\n\t\t\t}\n\t\t\tthis.showModal = true\n\t\t},\n\n\t\tcloseModal() {\n\t\t\tthis.showModal = false\n\t\t\tthis.editingId = null\n\t\t},\n\n\t\tasync saveStage() {\n\t\t\tthis.saving = true\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tname: this.form.name,\n\t\t\t\t\tdescription: this.form.description || null,\n\t\t\t\t\tcolor: this.form.color,\n\t\t\t\t\tisInitial: this.form.isInitial,\n\t\t\t\t\tisFinal: this.form.isFinal,\n\t\t\t\t\tslaHours: this.form.slaHours || null,\n\t\t\t\t}\n\n\t\t\t\tif (this.editingId) {\n\t\t\t\t\tawait this.stageStore.update(this.editingId, data)\n\t\t\t\t\tshowSuccess('Etapa atualizada')\n\t\t\t\t} else {\n\t\t\t\t\tawait this.stageStore.create(this.processTypeId, data)\n\t\t\t\t\tshowSuccess('Etapa criada')\n\t\t\t\t}\n\t\t\t\tthis.closeModal()\n\t\t\t} catch (error) {\n\t\t\t\tshowError(error.response?.data?.error || 'Erro ao salvar etapa')\n\t\t\t} finally {\n\t\t\t\tthis.saving = false\n\t\t\t}\n\t\t},\n\n\t\tasync confirmDelete(stage) {\n\t\t\tif (confirm(`Tem certeza que deseja excluir \"${stage.name}\"?`)) {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.stageStore.remove(stage.id)\n\t\t\t\t\tshowSuccess('Etapa excluida')\n\t\t\t\t} catch (error) {\n\t\t\t\t\tshowError('Erro ao excluir etapa')\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tasync onDragEnd() {\n\t\t\tconst stageIds = this.orderedStages.map(s => s.id)\n\t\t\ttry {\n\t\t\t\tawait this.stageStore.reorder(this.processTypeId, stageIds)\n\t\t\t\tshowSuccess('Ordem atualizada')\n\t\t\t} catch (error) {\n\t\t\t\tshowError('Erro ao reordenar etapas')\n\t\t\t\t// Reset local order on failure\n\t\t\t\tthis.localOrder = []\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.stage-manager {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tpadding: 20px;\n\tmax-width: 900px;\n\n\t.empty-content {\n\t\tflex: 1;\n\t}\n\n\t&__header {\n\t\tflex-shrink: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20px;\n\n\t\th2 {\n\t\t\tmargin: 0;\n\t\t}\n\t}\n}\n\n.stage-item {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12px;\n\tpadding: 12px 16px;\n\tborder-radius: var(--border-radius-large);\n\tbackground: var(--color-background-dark);\n\ttransition: background 0.2s;\n\tmargin-bottom: 8px;\n\n\t&:hover {\n\t\tbackground: var(--color-background-hover);\n\t}\n\n\t&__color {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4px;\n\t\tmin-width: 0;\n\t}\n\n\t&__name {\n\t\tfont-weight: bold;\n\t\tfont-size: 14px;\n\t}\n\n\t&__badges {\n\t\tdisplay: flex;\n\t\tgap: 6px;\n\t\tflex-wrap: wrap;\n\t}\n\n\t&__desc {\n\t\tfont-size: 13px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t\tgap: 4px;\n\t\tflex-shrink: 0;\n\t}\n}\n\n.drag-handle {\n\tcursor: grab;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: var(--color-text-maxcontrast);\n\tflex-shrink: 0;\n\n\t&:active {\n\t\tcursor: grabbing;\n\t}\n}\n\n.stage-badge {\n\tfont-size: 11px;\n\tpadding: 2px 8px;\n\tborder-radius: var(--border-radius-pill);\n\tfont-weight: 600;\n\n\t&--initial {\n\t\tbackground: var(--color-primary-element);\n\t\tcolor: var(--color-primary-element-text);\n\t}\n\n\t&--final {\n\t\tbackground: var(--color-success);\n\t\tcolor: white;\n\t}\n\n\t&--sla {\n\t\tbackground: var(--color-warning);\n\t\tcolor: white;\n\t}\n}\n\n.stage-modal {\n\tpadding: 20px;\n\tmin-width: 400px;\n\n\th2 {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 16px;\n\t}\n}\n\n.form-group {\n\tmargin-bottom: 12px;\n\n\tlabel {\n\t\tdisplay: block;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 4px;\n\t\tfont-size: 14px;\n\t}\n\n\tinput[type=\"text\"],\n\tinput[type=\"number\"],\n\ttextarea {\n\t\twidth: 100%;\n\t\tpadding: 8px 10px;\n\t\tborder: 1px solid var(--color-border-dark);\n\t\tborder-radius: var(--border-radius);\n\t\tfont-size: 14px;\n\t\tbackground: var(--color-main-background);\n\t\tcolor: var(--color-main-text);\n\n\t\t&:focus {\n\t\t\tborder-color: var(--color-primary-element);\n\t\t\toutline: none;\n\t\t}\n\t}\n\n\t&--half {\n\t\tflex: 1;\n\t}\n}\n\n.form-row {\n\tdisplay: flex;\n\tgap: 12px;\n}\n\n.color-input {\n\theight: 36px;\n\tpadding: 2px;\n\tcursor: pointer;\n}\n\n.checkbox-label {\n\tdisplay: flex !important;\n\talign-items: center;\n\tgap: 8px;\n\tcursor: pointer;\n\tfont-weight: 400 !important;\n\n\tinput[type=\"checkbox\"] {\n\t\twidth: auto;\n\t\tmargin: 0;\n\t}\n}\n\n.form-actions {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8px;\n\tmargin-top: 16px;\n\tpadding-top: 16px;\n\tborder-top: 1px solid var(--color-border);\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StageManager.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StageManager.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StageManager.vue?vue&type=style&index=0&id=602b77f6&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StageManager.vue?vue&type=style&index=0&id=602b77f6&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./StageManager.vue?vue&type=template&id=602b77f6&scoped=true\"\nimport script from \"./StageManager.vue?vue&type=script&lang=js\"\nexport * from \"./StageManager.vue?vue&type=script&lang=js\"\nimport style0 from \"./StageManager.vue?vue&type=style&index=0&id=602b77f6&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"602b77f6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["baseUrl","generateUrl","api","axios","create","baseURL","interceptors","response","use","error","status","window","dispatchEvent","CustomEvent","Promise","reject","processTypeApi","getAll","data","get","Array","isArray","async","getById","id","post","update","put","delete","restore","useProcessTypeStore","defineStore","state","processTypes","currentProcessType","loading","getters","activeProcessTypes","filter","pt","isActive","find","actions","fetchAll","this","fetchById","created","push","updated","index","findIndex","remove","restored","___CSS_LOADER_EXPORT___","module","name","emits","props","title","type","String","fillColor","default","size","Number","_vm","_c","_self","_b","staticClass","attrs","on","$event","$emit","$attrs","_v","_s","_e","stageApi","getByProcessType","procTypeId","reorder","stageIds","useStageStore","stages","s","fetchByProcessType","forEach","stageId","stage","sortOrder","components","NcButton","NcModal","NcEmptyContent","NcLoadingIcon","Plus","Pencil","Delete","DragHorizontalVariant","draggable","stageStore","processTypeStore","showModal","editingId","saving","localOrder","form","description","color","isInitial","isFinal","slaHours","computed","processTypeId","parseInt","$route","params","processTypeName","orderedStages","length","sort","a","b","set","value","watch","methods","openCreateModal","openEditModal","closeModal","saveStage","showSuccess","showError","confirmDelete","confirm","onDragEnd","map","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","component","scopedSlots","_u","key","fn","proxy","model","callback","$$v","expression","_l","style","backgroundColor","preventDefault","apply","arguments","directives","rawName","domProps","target","composing","$set","modifiers","_n","$forceUpdate","_i","$$a","$$el","$$c","checked","$$i","concat","slice"],"sourceRoot":""}