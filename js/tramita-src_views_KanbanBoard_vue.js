"use strict";(self.webpackChunktramita=self.webpackChunktramita||[]).push([["src_views_KanbanBoard_vue"],{9210(t,e,r){r.d(e,{F:()=>n});var a=r(6802);const s=(0,r(3814).Jv)("/apps/tramita/api/v1"),n=a.Ay.create({baseURL:s});n.interceptors.response.use(t=>t,t=>(402===t.response?.status&&window.dispatchEvent(new CustomEvent("tramita:license-required")),Promise.reject(t)))},4452(t,e,r){r.d(e,{U:()=>o});var a=r(810),s=r(9210);const n={async getAll(){const t=(await s.F.get("/process-types")).data;return Array.isArray(t)?t:t?.data??[]},getById:async t=>(await s.F.get(`/process-types/${t}`)).data,create:async t=>(await s.F.post("/process-types",t)).data,update:async(t,e)=>(await s.F.put(`/process-types/${t}`,e)).data,delete:async t=>(await s.F.delete(`/process-types/${t}`)).data,restore:async t=>(await s.F.put(`/process-types/${t}/restore`)).data},o=(0,a.nY)("processType",{state:()=>({processTypes:[],currentProcessType:null,loading:!1,error:null}),getters:{activeProcessTypes:t=>t.processTypes.filter(t=>t.isActive),getById:t=>e=>t.processTypes.find(t=>t.id===e)},actions:{async fetchAll(){this.loading=!0,this.error=null;try{this.processTypes=await n.getAll()}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar tipos de processo",t}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{return this.currentProcessType=await n.getById(t),this.currentProcessType}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar tipo de processo",t}finally{this.loading=!1}},async create(t){try{const e=await n.create(t);return this.processTypes.push(e),e}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar tipo de processo",t}},async update(t,e){try{const r=await n.update(t,e),a=this.processTypes.findIndex(e=>e.id===t);return-1!==a&&(this.processTypes[a]=r),this.currentProcessType?.id===t&&(this.currentProcessType=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar tipo de processo",t}},async remove(t){try{await n.delete(t),this.processTypes=this.processTypes.filter(e=>e.id!==t)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir tipo de processo",t}},async restore(t){try{const e=await n.restore(t);return this.processTypes.push(e),e}catch(t){throw this.error=t.response?.data?.error||"Erro ao restaurar tipo de processo",t}}}})},1017(t,e,r){r.d(e,{_:()=>o});var a=r(810),s=r(9210);const n={getByProcessType:async(t,e={})=>(await s.F.get(`/process-types/${t}/requests`,{params:e})).data,getById:async t=>(await s.F.get(`/requests/${t}`)).data,create:async(t,e)=>(await s.F.post(`/process-types/${t}/requests`,e)).data,update:async(t,e)=>(await s.F.put(`/requests/${t}`,e)).data,delete:async t=>(await s.F.delete(`/requests/${t}`)).data,move:async(t,e,r=null)=>(await s.F.put(`/requests/${t}/move`,{toStageId:e,comment:r})).data,search:async(t,e,r=20)=>(await s.F.get("/requests/search",{params:{query:t,groupId:e,limit:r}})).data,getHistory:async t=>(await s.F.get(`/requests/${t}/history`)).data,assign:async(t,e,r="assigned")=>(await s.F.post(`/requests/${t}/assign`,{userId:e,role:r})).data,unassign:async(t,e)=>(await s.F.delete(`/requests/${t}/assign/${e}`)).data,addLabel:async(t,e)=>(await s.F.post(`/requests/${t}/labels`,{labelId:e})).data,removeLabel:async(t,e)=>(await s.F.delete(`/requests/${t}/labels/${e}`)).data,setDeadline:async(t,e)=>(await s.F.put(`/requests/${t}/deadline`,{dueDate:e})).data},o=(0,a.nY)("request",{state:()=>({requests:[],currentRequest:null,loading:!1,error:null}),getters:{getByStage:t=>e=>t.requests.filter(t=>t.currentStageId===e),getByProcessType:t=>e=>t.requests.filter(t=>t.procTypeId===e),getById:t=>e=>t.requests.find(t=>t.id===e)},actions:{async fetchByProcessType(t,e={}){this.loading=!0,this.error=null;try{this.requests=await n.getByProcessType(t,e)}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar requisições",t}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{return this.currentRequest=await n.getById(t),this.currentRequest}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar requisição",t}finally{this.loading=!1}},async create(t,e){try{const r=await n.create(t,e);return this.requests.push(r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar requisição",t}},async update(t,e){try{const r=await n.update(t,e),a=this.requests.findIndex(e=>e.id===t);return-1!==a&&(this.requests[a]=r),this.currentRequest?.id===t&&(this.currentRequest=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar requisição",t}},async remove(t){try{await n.delete(t),this.requests=this.requests.filter(e=>e.id!==t),this.currentRequest?.id===t&&(this.currentRequest=null)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir requisição",t}},async move(t,e,r=null){try{const a=await n.move(t,e,r),s=this.requests.findIndex(e=>e.id===t);return-1!==s&&(this.requests[s]=a),this.currentRequest?.id===t&&(this.currentRequest=a),a}catch(t){throw this.error=t.response?.data?.error||"Erro ao mover requisição",t}},async search(t,e){this.loading=!0,this.error=null;try{return await n.search(t,e)}catch(t){throw this.error=t.response?.data?.error||"Erro ao buscar requisições",t}finally{this.loading=!1}}}})},5324(t,e,r){r.d(e,{L:()=>o});var a=r(810),s=r(9210);const n={getByProcessType:async t=>(await s.F.get(`/process-types/${t}/stages`)).data,getById:async t=>(await s.F.get(`/stages/${t}`)).data,create:async(t,e)=>(await s.F.post(`/process-types/${t}/stages`,e)).data,update:async(t,e)=>(await s.F.put(`/stages/${t}`,e)).data,delete:async t=>(await s.F.delete(`/stages/${t}`)).data,reorder:async(t,e)=>(await s.F.put(`/process-types/${t}/stages/reorder`,{stageIds:e})).data},o=(0,a.nY)("stage",{state:()=>({stages:[],loading:!1,error:null}),getters:{getByProcessType:t=>e=>t.stages.filter(t=>t.procTypeId===e),getById:t=>e=>t.stages.find(t=>t.id===e)},actions:{async fetchByProcessType(t){this.loading=!0,this.error=null;try{const e=await n.getByProcessType(t);return this.stages=[...this.stages.filter(e=>e.procTypeId!==t),...e],e}catch(t){throw this.error=t.response?.data?.error||"Erro ao carregar etapas",t}finally{this.loading=!1}},async create(t,e){try{const r=await n.create(t,e);return this.stages.push(r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao criar etapa",t}},async update(t,e){try{const r=await n.update(t,e),a=this.stages.findIndex(e=>e.id===t);return-1!==a&&(this.stages[a]=r),r}catch(t){throw this.error=t.response?.data?.error||"Erro ao atualizar etapa",t}},async remove(t){try{await n.delete(t),this.stages=this.stages.filter(e=>e.id!==t)}catch(t){throw this.error=t.response?.data?.error||"Erro ao excluir etapa",t}},async reorder(t,e){try{await n.reorder(t,e),e.forEach((t,e)=>{const r=this.stages.find(e=>e.id===t);r&&(r.sortOrder=e)})}catch(t){throw this.error=t.response?.data?.error||"Erro ao reordenar etapas",t}}}})},3859(t,e,r){r.d(e,{A:()=>i});var a=r(1354),s=r.n(a),n=r(6314),o=r.n(n)()(s());o.push([t.id,".kanban-card[data-v-28989b3e]{background:var(--color-main-background);border-radius:var(--border-radius);padding:10px 12px;cursor:pointer;border:1px solid var(--color-border);transition:box-shadow .2s,border-color .2s;position:relative}.kanban-card[data-v-28989b3e]:hover{box-shadow:0 2px 6px rgba(0,0,0,.1);border-color:var(--color-primary-element)}.kanban-card--ghost[data-v-28989b3e]{opacity:.4;border:2px dashed var(--color-primary-element)}.kanban-card--overdue[data-v-28989b3e]{border-left:3px solid var(--color-error)}.kanban-card__header[data-v-28989b3e]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.kanban-card__protocol[data-v-28989b3e]{font-size:11px;font-family:monospace;color:var(--color-text-maxcontrast)}.kanban-card__priority[data-v-28989b3e]{font-size:10px;padding:1px 6px;border-radius:var(--border-radius-pill);font-weight:600;text-transform:uppercase}.kanban-card__title[data-v-28989b3e]{margin:0 0 8px;font-size:13px;font-weight:500;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.kanban-card__footer[data-v-28989b3e]{display:flex;gap:12px;align-items:center;font-size:12px;color:var(--color-text-maxcontrast)}.kanban-card__due[data-v-28989b3e],.kanban-card__requester[data-v-28989b3e]{display:flex;align-items:center;gap:3px}.kanban-card__due--overdue[data-v-28989b3e]{color:var(--color-error);font-weight:600}.kanban-card__confidential[data-v-28989b3e]{position:absolute;top:8px;right:8px;color:var(--color-warning)}.priority--1[data-v-28989b3e]{background:var(--color-error);color:#fff}.priority--2[data-v-28989b3e]{background:var(--color-primary-element);color:#fff}.priority--3[data-v-28989b3e]{background:var(--color-text-maxcontrast);color:#fff}","",{version:3,sources:["webpack://./src/components/kanban/KanbanCard.vue"],names:[],mappings:"AACA,8BACC,uCAAA,CACA,kCAAA,CACA,iBAAA,CACA,cAAA,CACA,oCAAA,CACA,0CAAA,CACA,iBAAA,CAEA,oCACC,mCAAA,CACA,yCAAA,CAGD,qCACC,UAAA,CACA,8CAAA,CAGD,uCACC,wCAAA,CAGD,sCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,iBAAA,CAGD,wCACC,cAAA,CACA,qBAAA,CACA,mCAAA,CAGD,wCACC,cAAA,CACA,eAAA,CACA,uCAAA,CACA,eAAA,CACA,wBAAA,CAGD,qCACC,cAAA,CACA,cAAA,CACA,eAAA,CACA,eAAA,CACA,mBAAA,CACA,oBAAA,CACA,2BAAA,CACA,eAAA,CAGD,sCACC,YAAA,CACA,QAAA,CACA,kBAAA,CACA,cAAA,CACA,mCAAA,CAGD,4EACC,YAAA,CACA,kBAAA,CACA,OAAA,CAGD,4CACC,wBAAA,CACA,eAAA,CAGD,4CACC,iBAAA,CACA,OAAA,CACA,SAAA,CACA,0BAAA,CAKD,8BACC,6BAAA,CACA,UAAA,CAED,8BACC,uCAAA,CACA,UAAA,CAED,8BACC,wCAAA,CACA,UAAA",sourcesContent:["\n.kanban-card {\n\tbackground: var(--color-main-background);\n\tborder-radius: var(--border-radius);\n\tpadding: 10px 12px;\n\tcursor: pointer;\n\tborder: 1px solid var(--color-border);\n\ttransition: box-shadow 0.2s, border-color 0.2s;\n\tposition: relative;\n\n\t&:hover {\n\t\tbox-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n\t\tborder-color: var(--color-primary-element);\n\t}\n\n\t&--ghost {\n\t\topacity: 0.4;\n\t\tborder: 2px dashed var(--color-primary-element);\n\t}\n\n\t&--overdue {\n\t\tborder-left: 3px solid var(--color-error);\n\t}\n\n\t&__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 6px;\n\t}\n\n\t&__protocol {\n\t\tfont-size: 11px;\n\t\tfont-family: monospace;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__priority {\n\t\tfont-size: 10px;\n\t\tpadding: 1px 6px;\n\t\tborder-radius: var(--border-radius-pill);\n\t\tfont-weight: 600;\n\t\ttext-transform: uppercase;\n\t}\n\n\t&__title {\n\t\tmargin: 0 0 8px;\n\t\tfont-size: 13px;\n\t\tfont-weight: 500;\n\t\tline-height: 1.3;\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 2;\n\t\t-webkit-box-orient: vertical;\n\t\toverflow: hidden;\n\t}\n\n\t&__footer {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t\talign-items: center;\n\t\tfont-size: 12px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__due, &__requester {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 3px;\n\t}\n\n\t&__due--overdue {\n\t\tcolor: var(--color-error);\n\t\tfont-weight: 600;\n\t}\n\n\t&__confidential {\n\t\tposition: absolute;\n\t\ttop: 8px;\n\t\tright: 8px;\n\t\tcolor: var(--color-warning);\n\t}\n}\n\n.priority {\n\t&--1 {\n\t\tbackground: var(--color-error);\n\t\tcolor: white;\n\t}\n\t&--2 {\n\t\tbackground: var(--color-primary-element);\n\t\tcolor: white;\n\t}\n\t&--3 {\n\t\tbackground: var(--color-text-maxcontrast);\n\t\tcolor: white;\n\t}\n}\n"],sourceRoot:""}]);const i=o},2132(t,e,r){r.d(e,{A:()=>i});var a=r(1354),s=r.n(a),n=r(6314),o=r.n(n)()(s());o.push([t.id,".kanban-column[data-v-1d6b7502]{min-width:280px;max-width:320px;background:var(--color-background-dark);border-radius:var(--border-radius-large);display:flex;flex-direction:column;max-height:calc(100vh - 200px)}.kanban-column__header[data-v-1d6b7502]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-bottom:2px solid var(--column-color, #808080)}.kanban-column__color[data-v-1d6b7502]{width:10px;height:10px;border-radius:50%;flex-shrink:0}.kanban-column__title[data-v-1d6b7502]{flex:1;margin:0;font-size:14px;font-weight:600}.kanban-column__count[data-v-1d6b7502]{background:var(--color-background-darker);padding:2px 8px;border-radius:var(--border-radius-pill);font-size:12px;font-weight:600}.kanban-column__cards[data-v-1d6b7502]{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:8px;min-height:50px}","",{version:3,sources:["webpack://./src/components/kanban/KanbanColumn.vue"],names:[],mappings:"AACA,gCACC,eAAA,CACA,eAAA,CACA,uCAAA,CACA,wCAAA,CACA,YAAA,CACA,qBAAA,CACA,8BAAA,CAEA,wCACC,YAAA,CACA,kBAAA,CACA,OAAA,CACA,iBAAA,CACA,oDAAA,CAGD,uCACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,aAAA,CAGD,uCACC,MAAA,CACA,QAAA,CACA,cAAA,CACA,eAAA,CAGD,uCACC,yCAAA,CACA,eAAA,CACA,uCAAA,CACA,cAAA,CACA,eAAA,CAGD,uCACC,MAAA,CACA,eAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CACA,eAAA",sourcesContent:["\n.kanban-column {\n\tmin-width: 280px;\n\tmax-width: 320px;\n\tbackground: var(--color-background-dark);\n\tborder-radius: var(--border-radius-large);\n\tdisplay: flex;\n\tflex-direction: column;\n\tmax-height: calc(100vh - 200px);\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\t\tpadding: 12px 16px;\n\t\tborder-bottom: 2px solid var(--column-color, #808080);\n\t}\n\n\t&__color {\n\t\twidth: 10px;\n\t\theight: 10px;\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__title {\n\t\tflex: 1;\n\t\tmargin: 0;\n\t\tfont-size: 14px;\n\t\tfont-weight: 600;\n\t}\n\n\t&__count {\n\t\tbackground: var(--color-background-darker);\n\t\tpadding: 2px 8px;\n\t\tborder-radius: var(--border-radius-pill);\n\t\tfont-size: 12px;\n\t\tfont-weight: 600;\n\t}\n\n\t&__cards {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 8px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8px;\n\t\tmin-height: 50px;\n\t}\n}\n"],sourceRoot:""}]);const i=o},6587(t,e,r){r.d(e,{A:()=>i});var a=r(1354),s=r.n(a),n=r(6314),o=r.n(n)()(s());o.push([t.id,".kanban-board[data-v-c783abb4]{padding:20px;height:100%;display:flex;flex-direction:column}.kanban-board__header[data-v-c783abb4]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-shrink:0}.kanban-board__header h2[data-v-c783abb4]{margin:0}.kanban-board__columns[data-v-c783abb4]{display:flex;gap:12px;overflow-x:auto;flex:1;padding-bottom:16px;align-items:flex-start}","",{version:3,sources:["webpack://./src/views/KanbanBoard.vue"],names:[],mappings:"AACA,+BACC,YAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CAEA,uCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CACA,aAAA,CAEA,0CACC,QAAA,CAIF,wCACC,YAAA,CACA,QAAA,CACA,eAAA,CACA,MAAA,CACA,mBAAA,CACA,sBAAA",sourcesContent:["\n.kanban-board {\n\tpadding: 20px;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 16px;\n\t\tflex-shrink: 0;\n\n\t\th2 {\n\t\t\tmargin: 0;\n\t\t}\n\t}\n\n\t&__columns {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t\toverflow-x: auto;\n\t\tflex: 1;\n\t\tpadding-bottom: 16px;\n\t\talign-items: flex-start;\n\t}\n}\n"],sourceRoot:""}]);const i=o},998(t,e,r){r.r(e),r.d(e,{default:()=>N});var a=r(4095),s=r(8289),n=r(6078),o=r(432),i=r.n(o);const c={name:"CalendarClockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var A=r(4486);const d=(0,A.A)(c,function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon calendar-clock-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M15,13H16.5V15.82L18.94,17.23L18.19,18.53L15,16.69V13M19,8H5V19H9.67C9.24,18.09 9,17.07 9,16A7,7 0 0,1 16,9C17.07,9 18.09,9.24 19,9.67V8M5,21C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V11.1C22.24,12.36 23,14.09 23,16A7,7 0 0,1 16,23C14.09,23 12.36,22.24 11.1,21H5M16,11.15A4.85,4.85 0 0,0 11.15,16C11.15,18.68 13.32,20.85 16,20.85A4.85,4.85 0 0,0 20.85,16C20.85,13.32 18.68,11.15 16,11.15Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},[],!1,null,null,null).exports;const l={name:"AccountCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const p=(0,A.A)(l,function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon account-circle-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},[],!1,null,null,null).exports;const u={name:"LockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const C={name:"KanbanCard",components:{CalendarClock:d,AccountCircle:p,Lock:(0,A.A)(u,function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon lock-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},[],!1,null,null,null).exports},props:{request:{type:Object,required:!0}},computed:{priorityLabel(){return{1:"Urgente",2:"Normal",3:"Baixa"}[this.request.priority]||"Normal"},isOverdue(){return!!this.request.dueDate&&new Date(this.request.dueDate)<new Date},cardClasses(){return{"kanban-card--confidential":this.request.isConfidential,"kanban-card--overdue":this.isOverdue}}},methods:{formatDate(t){if(!t)return"";return new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}}};var h=r(5072),g=r.n(h),y=r(7825),b=r.n(y),m=r(7659),v=r.n(m),f=r(5056),_=r.n(f),x=r(540),w=r.n(x),k=r(1113),q=r.n(k),B=r(3859),I={};I.styleTagTransform=q(),I.setAttributes=_(),I.insert=v().bind(null,"head"),I.domAPI=b(),I.insertStyleElement=w();g()(B.A,I);B.A&&B.A.locals&&B.A.locals;const T=(0,A.A)(C,function(){var t=this,e=t._self._c;return e("div",{staticClass:"kanban-card",class:t.cardClasses,attrs:{"data-request-id":t.request.id}},[e("div",{staticClass:"kanban-card__header"},[t.request.protocolId?e("span",{staticClass:"kanban-card__protocol"},[t._v("\n\t\t\t"+t._s(t.request.protocolNumber||`#${t.request.protocolId}`)+"\n\t\t")]):t._e(),t._v(" "),e("span",{staticClass:"kanban-card__priority",class:`priority--${t.request.priority}`},[t._v("\n\t\t\t"+t._s(t.priorityLabel)+"\n\t\t")])]),t._v(" "),e("h4",{staticClass:"kanban-card__title"},[t._v(t._s(t.request.title))]),t._v(" "),e("div",{staticClass:"kanban-card__footer"},[t.request.dueDate?e("span",{staticClass:"kanban-card__due",class:{"kanban-card__due--overdue":t.isOverdue}},[e("CalendarClock",{attrs:{size:14}}),t._v("\n\t\t\t"+t._s(t.formatDate(t.request.dueDate))+"\n\t\t")],1):t._e(),t._v(" "),t.request.requesterName?e("span",{staticClass:"kanban-card__requester"},[e("AccountCircle",{attrs:{size:14}}),t._v("\n\t\t\t"+t._s(t.request.requesterName)+"\n\t\t")],1):t._e()]),t._v(" "),t.request.isConfidential?e("div",{staticClass:"kanban-card__confidential"},[e("Lock",{attrs:{size:14}})],1):t._e()])},[],!1,null,"28989b3e",null).exports,$={name:"KanbanColumn",components:{draggable:i(),KanbanCard:T},props:{stage:{type:Object,required:!0},requests:{type:Array,default:()=>[]}},computed:{columnStyle(){return{"--column-color":this.stage.color||"#808080"}}},methods:{onDragEnd(t){if(t.to!==t.from||t.oldIndex!==t.newIndex){const e=parseInt(t.item.dataset.requestId),r=parseInt(t.to.dataset.stageId);this.$emit("move",{requestId:e,toStageId:r})}}}};var E=r(2132),D={};D.styleTagTransform=q(),D.setAttributes=_(),D.insert=v().bind(null,"head"),D.domAPI=b(),D.insertStyleElement=w();g()(E.A,D);E.A&&E.A.locals&&E.A.locals;var S=(0,A.A)($,function(){var t=this,e=t._self._c;return e("div",{staticClass:"kanban-column",style:t.columnStyle},[e("div",{staticClass:"kanban-column__header"},[e("div",{staticClass:"kanban-column__color",style:{backgroundColor:t.stage.color||"#808080"}}),t._v(" "),e("h3",{staticClass:"kanban-column__title"},[t._v(t._s(t.stage.name))]),t._v(" "),e("span",{staticClass:"kanban-column__count"},[t._v(t._s(t.requests.length))])]),t._v(" "),e("draggable",{staticClass:"kanban-column__cards",attrs:{value:t.requests,group:"requests","ghost-class":"kanban-card--ghost","data-stage-id":t.stage.id},on:{end:t.onDragEnd}},t._l(t.requests,function(r){return e("KanbanCard",{key:r.id,attrs:{request:r},nativeOn:{click:function(e){return t.$emit("click-card",r)}}})}),1)],1)},[],!1,null,"1d6b7502",null);const z=S.exports;var F=r(4452),P=r(5324),R=r(1017),L=r(5289);const V={name:"KanbanBoard",components:{NcButton:a.A,NcLoadingIcon:s.A,Plus:n.A,KanbanColumn:z},data:()=>({processTypeStore:(0,F.U)(),stageStore:(0,P.L)(),requestStore:(0,R._)(),loading:!0}),computed:{processTypeId(){return parseInt(this.$route.params.processTypeId)},processType(){return this.processTypeStore.getById(this.processTypeId)},stages(){return this.stageStore.getByProcessType(this.processTypeId).sort((t,e)=>t.sortOrder-e.sortOrder)}},async created(){try{await Promise.all([this.processTypeStore.fetchById(this.processTypeId),this.stageStore.fetchByProcessType(this.processTypeId),this.requestStore.fetchByProcessType(this.processTypeId)])}catch(t){(0,L.Qg)("Erro ao carregar o board")}finally{this.loading=!1}},methods:{getRequestsByStage(t){return this.requestStore.getByStage(t).sort((t,e)=>t.sortOrder-e.sortOrder)},createRequest(){this.$router.push(`/request/new/${this.processTypeId}`)},onClickCard(t){this.$router.push(`/request/${t.id}`)},async onMoveRequest({requestId:t,toStageId:e}){try{await this.requestStore.move(t,e)}catch(t){(0,L.Qg)("Erro ao mover requisição")}}}},M=V;var O=r(6587),G={};G.styleTagTransform=q(),G.setAttributes=_(),G.insert=v().bind(null,"head"),G.domAPI=b(),G.insertStyleElement=w();g()(O.A,G);O.A&&O.A.locals&&O.A.locals;var H=(0,A.A)(M,function(){var t=this,e=t._self._c;return e("div",{staticClass:"kanban-board"},[e("div",{staticClass:"kanban-board__header"},[e("h2",[t._v(t._s(t.processType?.name||"Carregando..."))]),t._v(" "),e("NcButton",{attrs:{type:"primary"},on:{click:t.createRequest},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\tNova Requisição\n\t\t")])],1),t._v(" "),t.loading?e("NcLoadingIcon",{attrs:{size:44}}):e("div",{staticClass:"kanban-board__columns"},t._l(t.stages,function(r){return e("KanbanColumn",{key:r.id,attrs:{stage:r,requests:t.getRequestsByStage(r.id)},on:{move:t.onMoveRequest,"click-card":t.onClickCard}})}),1)],1)},[],!1,null,"c783abb4",null);const N=H.exports},4095(t,e,r){r.d(e,{A:()=>a.N});var a=r(4294)}}]);
//# sourceMappingURL=tramita-src_views_KanbanBoard_vue.js.map?v=ca8a6d011dbb0e3e7d84